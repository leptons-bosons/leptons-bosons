<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Leptions, Bosons, Quarks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="virtualization, cloud">
<meta property="og:type" content="website">
<meta property="og:title" content="Leptions, Bosons, Quarks">
<meta property="og:url" content="https://username.github.io/leptons-bosons/page/3/index.html">
<meta property="og:site_name" content="Leptions, Bosons, Quarks">
<meta property="og:description" content="virtualization, cloud">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Henry">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/leptons-bosons/atom.xml" title="Leptions, Bosons, Quarks" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/leptons-bosons/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/leptons-bosons/css/style.css">

  
    
<link rel="stylesheet" href="/leptons-bosons/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/leptons-bosons/" id="logo">Leptions, Bosons, Quarks</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/leptons-bosons/" id="subtitle">light virt</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/leptons-bosons/">Home</a>
        
          <a class="main-nav-link" href="/leptons-bosons/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/leptons-bosons/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://username.github.io/leptons-bosons"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Run-Ovs-with-ovs-sandbox" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/09/02/Run-Ovs-with-ovs-sandbox/" class="article-date">
  <time class="dt-published" datetime="2018-09-02T05:11:08.000Z" itemprop="datePublished">2018-09-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/original/">original</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/09/02/Run-Ovs-with-ovs-sandbox/">Run OvS with ovs-sandbox</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Prepare the Linux environment, you can run a virtual machine, a centos 7.4 image, with <a target="_blank" rel="noopener" href="https://www.virtualbox.org/">virtual box</a>.</p>
<h4 id="Install-development-enviroment"><a href="#Install-development-enviroment" class="headerlink" title="Install development enviroment"></a>Install development enviroment</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ yum install git</span><br><span class="line">$ yum groupinstall &quot;Development tools&quot;</span><br></pre></td></tr></table></figure>

<h4 id="Download-Open-vSwitch-source-code"><a href="#Download-Open-vSwitch-source-code" class="headerlink" title="Download Open vSwitch source code"></a>Download Open vSwitch source code</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/openvswitch/ovs.git</span><br><span class="line">$ git branch --remote</span><br><span class="line">$ git branch branch-2.10</span><br></pre></td></tr></table></figure>

<h4 id="Compile-Open-vSwitch"><a href="#Compile-Open-vSwitch" class="headerlink" title="Compile Open vSwitch"></a>Compile Open vSwitch</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cd ./ovs</span><br><span class="line">$ sh ./boot.sh</span><br><span class="line">$ ./configure</span><br><span class="line">$ make</span><br><span class="line">$ ./tutorial/ovs-sandbox</span><br></pre></td></tr></table></figure>

<h3 id="Open-vSwitch-Advanced-Features"><a href="#Open-vSwitch-Advanced-Features" class="headerlink" title="Open vSwitch Advanced Features"></a>Open vSwitch Advanced Features</h3><h4 id="We-will-construct-Open-vSwitch-flow-tables-for-a-VLAN-capable-MAC-learning-switch-that-has-four-ports"><a href="#We-will-construct-Open-vSwitch-flow-tables-for-a-VLAN-capable-MAC-learning-switch-that-has-four-ports" class="headerlink" title="We will construct Open vSwitch flow tables for a VLAN-capable, MAC-learning switch that has four ports:"></a>We will construct Open vSwitch flow tables for a VLAN-capable, MAC-learning switch that has four ports:</h4><ul>
<li>p1: a trunk port that carries all VLANs, on OpenFlow port 1.</li>
<li>p2: an access port for VLAN 20, on OpenFlow port 2.</li>
<li>p3, p4: both access ports for VLAN 30, on OpenFlow ports 3 and 4, respectively.</li>
</ul>
<h4 id="Our-switch-design-will-consist-of-five-main-flow-tables-each-of-which-implements-one-stage-in-the-switch-pipeline"><a href="#Our-switch-design-will-consist-of-five-main-flow-tables-each-of-which-implements-one-stage-in-the-switch-pipeline" class="headerlink" title="Our switch design will consist of five main flow tables, each of which implements one stage in the switch pipeline:"></a>Our switch design will consist of five main flow tables, each of which implements one stage in the switch pipeline:</h4><ul>
<li>Table 0: Admission control.</li>
<li>Table 1: VLAN input processing.</li>
<li>Table 2: Learn source MAC and VLAN for ingress port.</li>
<li>Table 3: Look up learned port for destination MAC and VLAN.</li>
<li>Table 4: Output processing.</li>
</ul>
<h4 id="Setup-the-switch-and-ports"><a href="#Setup-the-switch-and-ports" class="headerlink" title="Setup the switch and ports"></a>Setup the switch and ports</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ovs-vsctl add-br br0 -- set Bridge br0 fail-mode=secure \</span><br><span class="line">$ ovs-vsctl add-port br0 p1 -- set Interface p1 ofport_request=1; ovs-ofctl mod-port br0 p1 up</span><br><span class="line">$ ovs-vsctl add-port br0 p2 -- set Interface p2 ofport_request=2; ovs-ofctl mod-port br0 p2 up</span><br><span class="line">$ ovs-vsctl add-port br0 p3 -- set Interface p3 ofport_request=3; ovs-ofctl mod-port br0 p3 up</span><br><span class="line">$ ovs-vsctl add-port br0 p4 -- set Interface p4 ofport_request=4; ovs-ofctl mod-port br0 p4 up</span><br></pre></td></tr></table></figure>

<h3 id="Implementing-tables"><a href="#Implementing-tables" class="headerlink" title="Implementing tables"></a>Implementing tables</h3><h4 id="Table-0-Multicase-source-address-and-stp-packets-are-not-forwarded-the-others-are-valid"><a href="#Table-0-Multicase-source-address-and-stp-packets-are-not-forwarded-the-others-are-valid" class="headerlink" title="Table 0: Multicase source address and stp packets are not forwarded, the others are valid."></a>Table 0: Multicase source address and stp packets are not forwarded, the others are valid.</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ovs-ofctl add-flow br0 &quot;table=0, dl_src=01:00:00:00:00:00/01:00:00:00:00:00, actions=drop&quot;</span><br><span class="line">$ ovs-ofctl add-flow br0 &quot;table=0, dl_dst=01:80:c2:00:00:00/ff:ff:ff:ff:ff:f0, actions=drop&quot;</span><br><span class="line">$ ovs-ofctl add-flow br0 &quot;table=0, priority=0, actions=resubmit(,1)&quot;</span><br></pre></td></tr></table></figure>
<h4 id="Table-1-vlan-input-processing-the-default-policy-is-“drop”"><a href="#Table-1-vlan-input-processing-the-default-policy-is-“drop”" class="headerlink" title="Table 1: vlan input processing, the default policy is “drop”."></a>Table 1: vlan input processing, the default policy is “drop”.</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ovs-ofctl add-flow br0 &quot;table=1, priority=0, actions=drop&quot;</span><br><span class="line">$ ovs-ofctl add-flow br0 &quot;table=1, priority=99, in_port=1, actions=resubmit(,2)&quot;</span><br><span class="line">$ ovs-ofctl add-flows br0 - &lt;&lt;&#x27;EOF&#x27;</span><br><span class="line">table=1, priority=99, in_port=2, vlan_tci=0, actions=mod_vlan_vid:20, resubmit(,2)</span><br><span class="line">table=1, priority=99, in_port=3, vlan_tci=0, actions=mod_vlan_vid:30, resubmit(,2)</span><br><span class="line">table=1, priority=99, in_port=4, vlan_tci=0, actions=mod_vlan_vid:30, resubmit(,2)</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h4 id="Table-2-MAC-VLAN-Learning-for-Ingress-Port"><a href="#Table-2-MAC-VLAN-Learning-for-Ingress-Port" class="headerlink" title="Table 2: MAC+VLAN Learning for Ingress Port"></a>Table 2: MAC+VLAN Learning for Ingress Port</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ovs-ofctl add-flow br0 \</span><br><span class="line">    &quot;table=2 actions=learn(table=10, NXM_OF_VLAN_TCI[0..11], \</span><br><span class="line">                           NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[], \</span><br><span class="line">                           load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15]), \</span><br><span class="line">                     resubmit(,3)&quot;</span><br></pre></td></tr></table></figure>

<h4 id="Table-3-Look-Up-Destination-Port"><a href="#Table-3-Look-Up-Destination-Port" class="headerlink" title="Table 3: Look Up Destination Port"></a>Table 3: Look Up Destination Port</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ovs-ofctl add-flow br0 \</span><br><span class="line">    &quot;table=3 priority=50 actions=resubmit(,10), resubmit(,4)&quot;</span><br><span class="line">$ ovs-ofctl add-flow br0 \</span><br><span class="line">    &quot;table=3 priority=99 dl_dst=01:00:00:00:00:00/01:00:00:00:00:00 actions=resubmit(,4)&quot;</span><br></pre></td></tr></table></figure>

<h4 id="Table-4-Output-Processing"><a href="#Table-4-Output-Processing" class="headerlink" title="Table 4: Output Processing"></a>Table 4: Output Processing</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ ovs-ofctl add-flow br0 &quot;table=4 reg0=1 actions=1&quot;</span><br><span class="line">$ ovs-ofctl add-flows br0 - &lt;&lt;&#x27;EOF&#x27;</span><br><span class="line">table=4 reg0=2 actions=strip_vlan,2</span><br><span class="line">table=4 reg0=3 actions=strip_vlan,3</span><br><span class="line">table=4 reg0=4 actions=strip_vlan,4</span><br><span class="line">EOF</span><br><span class="line">$ ovs-ofctl add-flows br0 - &lt;&lt;&#x27;EOF&#x27;</span><br><span class="line">table=4 reg0=0 priority=99 dl_vlan=20 actions=1,strip_vlan,2</span><br><span class="line">table=4 reg0=0 priority=99 dl_vlan=30 actions=1,strip_vlan,3,4</span><br><span class="line">table=4 reg0=0 priority=50            actions=1</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h3 id="Dump-all-the-table-flows"><a href="#Dump-all-the-table-flows" class="headerlink" title="Dump all the table flows"></a>Dump all the table flows</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># ovs-ofctl dump-flows br0</span><br><span class="line"> cookie=0x0, duration=4157.126s, table=0, n_packets=0, n_bytes=0, dl_src=01:00:00:00:00:00/01:00:00:00:00:00 actions=drop</span><br><span class="line"> cookie=0x0, duration=4146.396s, table=0, n_packets=0, n_bytes=0, dl_dst=01:80:c2:00:00:00/ff:ff:ff:ff:ff:f0 actions=drop</span><br><span class="line"> cookie=0x0, duration=4136.741s, table=0, n_packets=0, n_bytes=0, priority=0 actions=resubmit(,1)</span><br><span class="line"> cookie=0x0, duration=4073.263s, table=1, n_packets=0, n_bytes=0, priority=99,in_port=p1 actions=resubmit(,2)</span><br><span class="line"> cookie=0x0, duration=3829.544s, table=1, n_packets=0, n_bytes=0, priority=99,in_port=p2,vlan_tci=0x0000 actions=mod_vlan_vid:20,resubmit(,2)</span><br><span class="line"> cookie=0x0, duration=3829.468s, table=1, n_packets=0, n_bytes=0, priority=99,in_port=p3,vlan_tci=0x0000 actions=mod_vlan_vid:30,resubmit(,2)</span><br><span class="line"> cookie=0x0, duration=3829.468s, table=1, n_packets=0, n_bytes=0, priority=99,in_port=p4,vlan_tci=0x0000 actions=mod_vlan_vid:30,resubmit(,2)</span><br><span class="line"> cookie=0x0, duration=4089.873s, table=1, n_packets=0, n_bytes=0, priority=0 actions=drop</span><br><span class="line"> cookie=0x0, duration=3682.963s, table=2, n_packets=0, n_bytes=0, actions=learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15]),resubmit(,3)</span><br><span class="line"> cookie=0x0, duration=3645.636s, table=3, n_packets=0, n_bytes=0, priority=99,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00 actions=resubmit(,4)</span><br><span class="line"> cookie=0x0, duration=3549.407s, table=3, n_packets=0, n_bytes=0, priority=50 actions=resubmit(,10),resubmit(,4)</span><br><span class="line"> cookie=0x0, duration=3512.926s, table=4, n_packets=0, n_bytes=0, reg0=0x1 actions=output:p1</span><br><span class="line"> cookie=0x0, duration=1534.991s, table=4, n_packets=0, n_bytes=0, reg0=0x2 actions=strip_vlan,output:p2</span><br><span class="line"> cookie=0x0, duration=1534.990s, table=4, n_packets=0, n_bytes=0, reg0=0x3 actions=strip_vlan,output:p3</span><br><span class="line"> cookie=0x0, duration=1534.990s, table=4, n_packets=0, n_bytes=0, reg0=0x4 actions=strip_vlan,output:p4</span><br><span class="line"> cookie=0x0, duration=1515.987s, table=4, n_packets=0, n_bytes=0, priority=50,reg0=0 actions=output:p1</span><br><span class="line"> cookie=0x0, duration=1515.987s, table=4, n_packets=0, n_bytes=0, priority=99,reg0=0,dl_vlan=20 actions=output:p1,strip_vlan,output:p2</span><br><span class="line"> cookie=0x0, duration=1515.987s, table=4, n_packets=0, n_bytes=0, priority=99,reg0=0,dl_vlan=30 actions=output:p1,strip_vlan,output:p3,output:p4</span><br></pre></td></tr></table></figure>

<h3 id="Testing-Tables"><a href="#Testing-Tables" class="headerlink" title="Testing Tables"></a>Testing Tables</h3><h4 id="Testing-Table-0"><a href="#Testing-Table-0" class="headerlink" title="Testing Table 0"></a>Testing Table 0</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"># ovs-appctl ofproto/trace br0 in_port=1,dl_dst=01:80:c2:00:00:05</span><br><span class="line">Flow: in_port=1,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=01:80:c2:00:00:05,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. dl_dst=01:80:c2:00:00:00/ff:ff:ff:ff:ff:f0, priority 32768</span><br><span class="line">    drop</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_src=00:00:00:00:00:00/01:00:00:00:00:00,dl_dst=01:80:c2:00:00:00/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: drop</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 in_port=1,dl_dst=01:80:c2:00:00:10</span><br><span class="line">Flow: in_port=1,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=01:80:c2:00:00:10,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, priority 99</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0, priority 50</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,vlan_tci=0x0000/0x1fff,dl_src=00:00:00:00:00:00,dl_dst=01:80:c2:00:00:10/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: drop</span><br></pre></td></tr></table></figure>

<h4 id="Testing-Table-1"><a href="#Testing-Table-1" class="headerlink" title="Testing Table 1"></a>Testing Table 1</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"># ovs-appctl ofproto/trace br0 in_port=1,vlan_tci=5</span><br><span class="line">Flow: in_port=1,vlan_tci=0x0005,vlan_tci1=0x0000,dl_src=00:00:00:00:00:00,dl_dst=00:00:00:00:00:00,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. No match.</span><br><span class="line">            drop</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0, priority 50</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,vlan_tci=0x0005/0x1fff,dl_src=00:00:00:00:00:00,dl_dst=00:00:00:00:00:00/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: drop</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 in_port=2</span><br><span class="line">Flow: in_port=2,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=00:00:00:00:00:00,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=2,vlan_tci=0x0000, priority 99</span><br><span class="line">    mod_vlan_vid:20</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. No match.</span><br><span class="line">            drop</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=20, priority 99</span><br><span class="line">    output:1</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:2</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=2,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=00:00:00:00:00:00/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: push_vlan(vid=20,pcp=0),1</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 in_port=2</span><br><span class="line">Flow: in_port=2,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=00:00:00:00:00:00,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=2,vlan_tci=0x0000, priority 99</span><br><span class="line">    mod_vlan_vid:20</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. No match.</span><br><span class="line">            drop</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=20, priority 99</span><br><span class="line">    output:1</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:2</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=2,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=00:00:00:00:00:00/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: push_vlan(vid=20,pcp=0),1</span><br><span class="line">[root@localhost ovs]# </span><br><span class="line">[root@localhost ovs]# </span><br><span class="line">[root@localhost ovs]# ovs-appctl ofproto/trace br0 in_port=2,vlan_tci=5</span><br><span class="line">Flow: in_port=2,vlan_tci=0x0005,vlan_tci1=0x0000,dl_src=00:00:00:00:00:00,dl_dst=00:00:00:00:00:00,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. priority 0</span><br><span class="line">    drop</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=2,vlan_tci=0x0005,dl_src=00:00:00:00:00:00/01:00:00:00:00:00,dl_dst=00:00:00:00:00:00/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: drop</span><br></pre></td></tr></table></figure>

<h4 id="Testing-Table-2"><a href="#Testing-Table-2" class="headerlink" title="Testing Table 2"></a>Testing Table 2</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,vlan_tci=20,dl_src=50:00:00:00:00:01 -generate</span><br><span class="line">Flow: in_port=1,vlan_tci=0x0014,vlan_tci1=0x0000,dl_src=50:00:00:00:00:01,dl_dst=00:00:00:00:00:00,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     -&gt; table=10 vlan_tci=0x0014/0x0fff,dl_dst=50:00:00:00:00:01 priority=32768 actions=load:0x1-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. No match.</span><br><span class="line">            drop</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0, priority 50</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,vlan_tci=0x0014/0x1fff,dl_src=50:00:00:00:00:01,dl_dst=00:00:00:00:00:00,dl_type=0x0000</span><br><span class="line">Datapath actions: drop</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=2,dl_src=50:00:00:00:00:01 -generate</span><br><span class="line">Flow: in_port=2,vlan_tci=0x0000,dl_src=50:00:00:00:00:01,dl_dst=00:00:00:00:00:00,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=2,vlan_tci=0x0000, priority 99</span><br><span class="line">    mod_vlan_vid:20</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     -&gt; table=10 vlan_tci=0x0014/0x0fff,dl_dst=50:00:00:00:00:01 priority=32768 actions=load:0x2-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. No match.</span><br><span class="line">            drop</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=20, priority 99</span><br><span class="line">    output:1</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:2</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=2,vlan_tci=0x0000,dl_src=50:00:00:00:00:01,dl_dst=00:00:00:00:00:00,dl_type=0x0000</span><br><span class="line">Datapath actions: push_vlan(vid=20,pcp=0),1</span><br></pre></td></tr></table></figure>

<h4 id="Testing-Table-3"><a href="#Testing-Table-3" class="headerlink" title="Testing Table 3"></a>Testing Table 3</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_vlan=20,dl_src=f0:00:00:00:00:01,dl_dst=90:00:00:00:00:01 \</span><br><span class="line">&gt;     -generate</span><br><span class="line">Flow: in_port=1,dl_vlan=20,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=f0:00:00:00:00:01,dl_dst=90:00:00:00:00:01,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     -&gt; table=10 vlan_tci=0x0014/0x0fff,dl_dst=f0:00:00:00:00:01 priority=32768 actions=load:0x1-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. No match.</span><br><span class="line">            drop</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=20, priority 99</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:2</span><br><span class="line"></span><br><span class="line">Final flow: in_port=1,vlan_tci=0x0000,dl_src=f0:00:00:00:00:01,dl_dst=90:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_vlan=20,dl_vlan_pcp=0,dl_src=f0:00:00:00:00:01,dl_dst=90:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Datapath actions: pop_vlan,2</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=2,dl_src=90:00:00:00:00:01,dl_dst=f0:00:00:00:00:01 -generate</span><br><span class="line">Flow: in_port=2,vlan_tci=0x0000,dl_src=90:00:00:00:00:01,dl_dst=f0:00:00:00:00:01,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=2,vlan_tci=0x0000, priority 99</span><br><span class="line">    mod_vlan_vid:20</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     -&gt; table=10 vlan_tci=0x0014/0x0fff,dl_dst=90:00:00:00:00:01 priority=32768 actions=load:0x2-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. vlan_tci=0x0014/0x0fff,dl_dst=f0:00:00:00:00:01, priority 32768</span><br><span class="line">            load:0x1-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0x1, priority 32768</span><br><span class="line">    output:1</span><br><span class="line"></span><br><span class="line">Final flow: reg0=0x1,in_port=2,dl_vlan=20,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=90:00:00:00:00:01,dl_dst=f0:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=2,vlan_tci=0x0000,dl_src=90:00:00:00:00:01,dl_dst=f0:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Datapath actions: push_vlan(vid=20,pcp=0),1</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_vlan=20,dl_src=f0:00:00:00:00:01,dl_dst=90:00:00:00:00:01 \</span><br><span class="line">&gt;     -generate</span><br><span class="line">Flow: in_port=1,dl_vlan=20,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=f0:00:00:00:00:01,dl_dst=90:00:00:00:00:01,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     -&gt; table=10 vlan_tci=0x0014/0x0fff,dl_dst=f0:00:00:00:00:01 priority=32768 actions=load:0x1-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. vlan_tci=0x0014/0x0fff,dl_dst=90:00:00:00:00:01, priority 32768</span><br><span class="line">            load:0x2-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0x2, priority 32768</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:2</span><br><span class="line"></span><br><span class="line">Final flow: reg0=0x2,in_port=1,vlan_tci=0x0000,dl_src=f0:00:00:00:00:01,dl_dst=90:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_vlan=20,dl_vlan_pcp=0,dl_src=f0:00:00:00:00:01,dl_dst=90:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Datapath actions: pop_vlan,2</span><br></pre></td></tr></table></figure>

<h4 id="Testing-Table-4"><a href="#Testing-Table-4" class="headerlink" title="Testing Table 4"></a>Testing Table 4</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br></pre></td><td class="code"><pre><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_dst=ff:ff:ff:ff:ff:ff,dl_vlan=30</span><br><span class="line">Flow: in_port=1,dl_vlan=30,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, priority 99</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=30, priority 99</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:3</span><br><span class="line">    output:4</span><br><span class="line"></span><br><span class="line">Final flow: in_port=1,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_vlan=30,dl_vlan_pcp=0,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:f0/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: pop_vlan,3,4</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 in_port=3,dl_dst=ff:ff:ff:ff:ff:ff</span><br><span class="line">Flow: in_port=3,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=3,vlan_tci=0x0000, priority 99</span><br><span class="line">    mod_vlan_vid:30</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, priority 99</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=30, priority 99</span><br><span class="line">    output:1</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:3</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line">    output:4</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=3,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:f0/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: push_vlan(vid=30,pcp=0),1,pop_vlan,4</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_dst=ff:ff:ff:ff:ff:ff</span><br><span class="line">Flow: in_port=1,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, priority 99</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0, priority 50</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,vlan_tci=0x0000/0x1fff,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:f0/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: drop</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_dst=ff:ff:ff:ff:ff:ff,dl_vlan=55</span><br><span class="line">Flow: in_port=1,dl_vlan=55,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, priority 99</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0, priority 50</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_vlan=55,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:f0/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: drop</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_dst=ff:ff:ff:ff:ff:ff,dl_vlan=20</span><br><span class="line">Flow: in_port=1,dl_vlan=20,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, priority 99</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=20, priority 99</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:2</span><br><span class="line"></span><br><span class="line">Final flow: in_port=1,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_vlan=20,dl_vlan_pcp=0,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:f0/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: pop_vlan,2</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=2,dl_dst=ff:ff:ff:ff:ff:ff</span><br><span class="line">Flow: in_port=2,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=2,vlan_tci=0x0000, priority 99</span><br><span class="line">    mod_vlan_vid:20</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, priority 99</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=20, priority 99</span><br><span class="line">    output:1</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:2</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=2,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:f0/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: push_vlan(vid=20,pcp=0),1</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=4,dl_dst=ff:ff:ff:ff:ff:ff</span><br><span class="line">Flow: in_port=4,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=4,vlan_tci=0x0000, priority 99</span><br><span class="line">    mod_vlan_vid:30</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, priority 99</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=30, priority 99</span><br><span class="line">    output:1</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:3</span><br><span class="line">    output:4</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=4,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=ff:ff:ff:ff:ff:f0/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: push_vlan(vid=30,pcp=0),1,pop_vlan,3</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=4,dl_dst=01:00:00:00:00:00</span><br><span class="line">Flow: in_port=4,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=01:00:00:00:00:00,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=4,vlan_tci=0x0000, priority 99</span><br><span class="line">    mod_vlan_vid:30</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, priority 99</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=30, priority 99</span><br><span class="line">    output:1</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:3</span><br><span class="line">    output:4</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line"></span><br><span class="line">Final flow: unchanged</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=4,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=01:00:00:00:00:00/ff:ff:ff:ff:ff:f0,dl_type=0x0000</span><br><span class="line">Datapath actions: push_vlan(vid=30,pcp=0),1,pop_vlan,3</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_dst=90:12:34:56:78:90,dl_vlan=20</span><br><span class="line">Flow: in_port=1,dl_vlan=20,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=00:00:00:00:00:00,dl_dst=90:12:34:56:78:90,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. No match.</span><br><span class="line">            drop</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=20, priority 99</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:2</span><br><span class="line"></span><br><span class="line">Final flow: in_port=1,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=90:12:34:56:78:90,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_vlan=20,dl_vlan_pcp=0,dl_src=00:00:00:00:00:00,dl_dst=90:12:34:56:78:90,dl_type=0x0000</span><br><span class="line">Datapath actions: pop_vlan,2</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_dst=90:12:34:56:78:90,dl_vlan=30</span><br><span class="line">Flow: in_port=1,dl_vlan=30,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=00:00:00:00:00:00,dl_dst=90:12:34:56:78:90,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     &gt;&gt; suppressing side effects, so learn action ignored</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. No match.</span><br><span class="line">            drop</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=30, priority 99</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:3</span><br><span class="line">    output:4</span><br><span class="line"></span><br><span class="line">Final flow: in_port=1,vlan_tci=0x0000,dl_src=00:00:00:00:00:00,dl_dst=90:12:34:56:78:90,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_vlan=30,dl_vlan_pcp=0,dl_src=00:00:00:00:00:00,dl_dst=90:12:34:56:78:90,dl_type=0x0000</span><br><span class="line">Datapath actions: pop_vlan,3,4</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_vlan=30,dl_src=10:00:00:00:00:01,dl_dst=20:00:00:00:00:01 \</span><br><span class="line">&gt;     -generate</span><br><span class="line">Flow: in_port=1,dl_vlan=30,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=10:00:00:00:00:01,dl_dst=20:00:00:00:00:01,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     -&gt; table=10 vlan_tci=0x001e/0x0fff,dl_dst=10:00:00:00:00:01 priority=32768 actions=load:0x1-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. No match.</span><br><span class="line">            drop</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0,dl_vlan=30, priority 99</span><br><span class="line">    output:1</span><br><span class="line">     &gt;&gt; skipping output to input port</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:3</span><br><span class="line">    output:4</span><br><span class="line"></span><br><span class="line">Final flow: in_port=1,vlan_tci=0x0000,dl_src=10:00:00:00:00:01,dl_dst=20:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_vlan=30,dl_vlan_pcp=0,dl_src=10:00:00:00:00:01,dl_dst=20:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Datapath actions: pop_vlan,3,4</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=4,dl_src=20:00:00:00:00:01,dl_dst=10:00:00:00:00:01 -generate</span><br><span class="line">Flow: in_port=4,vlan_tci=0x0000,dl_src=20:00:00:00:00:01,dl_dst=10:00:00:00:00:01,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=4,vlan_tci=0x0000, priority 99</span><br><span class="line">    mod_vlan_vid:30</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     -&gt; table=10 vlan_tci=0x001e/0x0fff,dl_dst=20:00:00:00:00:01 priority=32768 actions=load:0x4-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. vlan_tci=0x001e/0x0fff,dl_dst=10:00:00:00:00:01, priority 32768</span><br><span class="line">            load:0x1-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0x1, priority 32768</span><br><span class="line">    output:1</span><br><span class="line"></span><br><span class="line">Final flow: reg0=0x1,in_port=4,dl_vlan=30,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=20:00:00:00:00:01,dl_dst=10:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=4,vlan_tci=0x0000,dl_src=20:00:00:00:00:01,dl_dst=10:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Datapath actions: push_vlan(vid=30,pcp=0),1</span><br><span class="line"></span><br><span class="line"># ovs-appctl ofproto/trace br0 \</span><br><span class="line">&gt;     in_port=1,dl_vlan=30,dl_src=10:00:00:00:00:01,dl_dst=20:00:00:00:00:01 \</span><br><span class="line">&gt;     -generate</span><br><span class="line">Flow: in_port=1,dl_vlan=30,dl_vlan_pcp=0,vlan_tci1=0x0000,dl_src=10:00:00:00:00:01,dl_dst=20:00:00:00:00:01,dl_type=0x0000</span><br><span class="line"></span><br><span class="line">bridge(&quot;br0&quot;)</span><br><span class="line">-------------</span><br><span class="line"> 0. priority 0</span><br><span class="line">    resubmit(,1)</span><br><span class="line"> 1. in_port=1, priority 99</span><br><span class="line">    resubmit(,2)</span><br><span class="line"> 2. priority 32768</span><br><span class="line">    learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15])</span><br><span class="line">     -&gt; table=10 vlan_tci=0x001e/0x0fff,dl_dst=10:00:00:00:00:01 priority=32768 actions=load:0x1-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,3)</span><br><span class="line"> 3. priority 50</span><br><span class="line">    resubmit(,10)</span><br><span class="line">    10. vlan_tci=0x001e/0x0fff,dl_dst=20:00:00:00:00:01, priority 32768</span><br><span class="line">            load:0x4-&gt;NXM_NX_REG0[0..15]</span><br><span class="line">    resubmit(,4)</span><br><span class="line"> 4. reg0=0x4, priority 32768</span><br><span class="line">    strip_vlan</span><br><span class="line">    output:4</span><br><span class="line"></span><br><span class="line">Final flow: reg0=0x4,in_port=1,vlan_tci=0x0000,dl_src=10:00:00:00:00:01,dl_dst=20:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Megaflow: recirc_id=0,eth,in_port=1,dl_vlan=30,dl_vlan_pcp=0,dl_src=10:00:00:00:00:01,dl_dst=20:00:00:00:00:01,dl_type=0x0000</span><br><span class="line">Datapath actions: pop_vlan,4</span><br></pre></td></tr></table></figure>
<h3 id="The-learning-tables-table-10"><a href="#The-learning-tables-table-10" class="headerlink" title="The learning tables: table 10"></a>The learning tables: table 10</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># ovs-ofctl dump-flows br0</span><br><span class="line"> cookie=0x0, duration=5216.779s, table=0, n_packets=0, n_bytes=0, dl_src=01:00:00:00:00:00/01:00:00:00:00:00 actions=drop</span><br><span class="line"> cookie=0x0, duration=5206.049s, table=0, n_packets=0, n_bytes=0, dl_dst=01:80:c2:00:00:00/ff:ff:ff:ff:ff:f0 actions=drop</span><br><span class="line"> cookie=0x0, duration=5196.394s, table=0, n_packets=0, n_bytes=0, priority=0 actions=resubmit(,1)</span><br><span class="line"> cookie=0x0, duration=5132.916s, table=1, n_packets=0, n_bytes=0, priority=99,in_port=p1 actions=resubmit(,2)</span><br><span class="line"> cookie=0x0, duration=4889.197s, table=1, n_packets=0, n_bytes=0, priority=99,in_port=p2,vlan_tci=0x0000 actions=mod_vlan_vid:20,resubmit(,2)</span><br><span class="line"> cookie=0x0, duration=4889.121s, table=1, n_packets=0, n_bytes=0, priority=99,in_port=p3,vlan_tci=0x0000 actions=mod_vlan_vid:30,resubmit(,2)</span><br><span class="line"> cookie=0x0, duration=4889.121s, table=1, n_packets=0, n_bytes=0, priority=99,in_port=p4,vlan_tci=0x0000 actions=mod_vlan_vid:30,resubmit(,2)</span><br><span class="line"> cookie=0x0, duration=5149.526s, table=1, n_packets=0, n_bytes=0, priority=0 actions=drop</span><br><span class="line"> cookie=0x0, duration=4742.616s, table=2, n_packets=0, n_bytes=0, actions=learn(table=10,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:NXM_OF_IN_PORT[]-&gt;NXM_NX_REG0[0..15]),resubmit(,3)</span><br><span class="line"> cookie=0x0, duration=4705.289s, table=3, n_packets=0, n_bytes=0, priority=99,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00 actions=resubmit(,4)</span><br><span class="line"> cookie=0x0, duration=4609.060s, table=3, n_packets=0, n_bytes=0, priority=50 actions=resubmit(,10),resubmit(,4)</span><br><span class="line"> cookie=0x0, duration=4572.579s, table=4, n_packets=0, n_bytes=0, reg0=0x1 actions=output:p1</span><br><span class="line"> cookie=0x0, duration=2594.644s, table=4, n_packets=0, n_bytes=0, reg0=0x2 actions=strip_vlan,output:p2</span><br><span class="line"> cookie=0x0, duration=2594.643s, table=4, n_packets=0, n_bytes=0, reg0=0x3 actions=strip_vlan,output:p3</span><br><span class="line"> cookie=0x0, duration=2594.643s, table=4, n_packets=0, n_bytes=0, reg0=0x4 actions=strip_vlan,output:p4</span><br><span class="line"> cookie=0x0, duration=2575.640s, table=4, n_packets=0, n_bytes=0, priority=50,reg0=0 actions=output:p1</span><br><span class="line"> cookie=0x0, duration=2575.640s, table=4, n_packets=0, n_bytes=0, priority=99,reg0=0,dl_vlan=20 actions=output:p1,strip_vlan,output:p2</span><br><span class="line"> cookie=0x0, duration=2575.640s, table=4, n_packets=0, n_bytes=0, priority=99,reg0=0,dl_vlan=30 actions=output:p1,strip_vlan,output:p3,output:p4</span><br><span class="line"> cookie=0x0, duration=602.623s, table=10, n_packets=0, n_bytes=0, vlan_tci=0x0014/0x0fff,dl_dst=50:00:00:00:00:01 actions=load:0x2-&gt;NXM_NX_REG0[0..15]</span><br><span class="line"> cookie=0x0, duration=537.283s, table=10, n_packets=0, n_bytes=0, vlan_tci=0x0014/0x0fff,dl_dst=f0:00:00:00:00:01 actions=load:0x1-&gt;NXM_NX_REG0[0..15]</span><br><span class="line"> cookie=0x0, duration=494.330s, table=10, n_packets=0, n_bytes=0, vlan_tci=0x0014/0x0fff,dl_dst=90:00:00:00:00:01 actions=load:0x2-&gt;NXM_NX_REG0[0..15]</span><br><span class="line"> cookie=0x0, duration=134.061s, table=10, n_packets=0, n_bytes=0, vlan_tci=0x001e/0x0fff,dl_dst=10:00:00:00:00:01 actions=load:0x1-&gt;NXM_NX_REG0[0..15]</span><br><span class="line"> cookie=0x0, duration=101.484s, table=10, n_packets=0, n_bytes=0, vlan_tci=0x001e/0x0fff,dl_dst=20:00:00:00:00:01 actions=load:0x4-&gt;NXM_NX_REG0[0..15]</span><br></pre></td></tr></table></figure>

<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a target="_blank" rel="noopener" href="http://docs.openvswitch.org/en/latest/intro/install/general/">Open vSwitch on Linux</a><br><a target="_blank" rel="noopener" href="http://docs.openvswitch.org/en/latest/tutorials/ovs-advanced/">Open vSwitch Advanced Features</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/09/02/Run-Ovs-with-ovs-sandbox/" data-id="ckrrxh5gn006k9svle7bn6n0j" data-title="Run OvS with ovs-sandbox" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/Open-vSwitch/" rel="tag">Open vSwitch</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/flow-table/" rel="tag">flow table</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/ofprot-trace/" rel="tag">ofprot/trace</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/ovs-sandbox/" rel="tag">ovs-sandbox</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-algorithm-the-last" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/08/31/algorithm-the-last/" class="article-date">
  <time class="dt-published" datetime="2018-08-31T14:18:42.000Z" itemprop="datePublished">2018-08-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/original/">original</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/08/31/algorithm-the-last/">Algorithm the last but not the least</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Dynamic-Programing"><a href="#Dynamic-Programing" class="headerlink" title="Dynamic Programing"></a>Dynamic Programing</h3><h4 id="knapsack-problem"><a href="#knapsack-problem" class="headerlink" title="knapsack problem"></a>knapsack problem</h4><ul>
<li>You’re a thief with a knapsack that can carry 4 lb of goods, You have four items that you can put into the knapsack.</li>
</ul>
<table>
<thead>
<tr>
<th align="left">Stereo</th>
<th align="left">Laptop</th>
<th align="left">Guitar</th>
<th align="left">Iphone</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$3000</td>
<td align="left">$2000</td>
<td align="left">$1500</td>
<td align="left">$2000</td>
</tr>
<tr>
<td align="left">4lbs</td>
<td align="left">3lbs</td>
<td align="left">1lbs</td>
<td align="left">1lbs</td>
</tr>
</tbody></table>
<ul>
<li>solution of knapsack problem<br><img src="/leptons-bosons/.io//knapsack-problem.png" alt="solution of knapsack problem"></li>
</ul>
<h4 id="longest-common-substring"><a href="#longest-common-substring" class="headerlink" title="longest common substring"></a>longest common substring</h4><ul>
<li>calculate the longest common substring between <em>blue</em> and <em>clues</em>, <em>fosh</em> compare with <em>fish</em>, <em>fort</em>, longest common substring is used for word wrap.</li>
<li>solution of longest common substring<br><img src="/leptons-bosons/.io//longest-common-substring.png" alt="solution of longest common substring"></li>
</ul>
<h3 id="K-Nearest-Neighbors"><a href="#K-Nearest-Neighbors" class="headerlink" title="K-Nearest-Neighbors"></a>K-Nearest-Neighbors</h3><ul>
<li>Classification, categorization into a group.</li>
<li>Regression, predicting a response (like a number).</li>
<li>Feature extraction means converting an item (like a fruit or a user) into a list of numbers that can be compared.</li>
<li>Picking good features is an important part of a successful KNN algorithm.</li>
</ul>
<h3 id="Algorithms-Go-Next"><a href="#Algorithms-Go-Next" class="headerlink" title="Algorithms, Go Next"></a>Algorithms, Go Next</h3><ul>
<li><strong>Trees</strong>, self-banlance tree, B-trees, Red-black trees, Heaps, Splay trees.</li>
<li><strong>Inverted indexes</strong>, a hash that maps words to places where they appear.</li>
<li><strong>The Fourier transform</strong>, given a smoothie, the Fourier transform will tell you the ingredients in the smoothie.</li>
<li><strong>Parallel algorithms</strong>, consider for overhead of managing the parallelism and load balancing.</li>
<li><strong>Map Reduce</strong>, the map function and the reduce function.</li>
<li><strong>Bloom filters</strong>, Bloom filters are probabilistic data structures. Bloom filters are great because they take up very little space.<ul>
<li>False positives are possible. Google might say, “You’ve already crawled this site,” even though you haven’t.</li>
<li>False negatives aren’t possible. If the bloom filter says, “You haven’t crawled this site,” then you definitely haven’t crawled this site.</li>
</ul>
</li>
<li><strong>HyperLogLog</strong>, HyperLogLog approximates the number of unique elements in a set. Just like bloom filters, it won’t give you an exact answer, but it comes very close and uses only a fraction of the memory a task like this would otherwise take.</li>
<li><strong>The SHA algorithms</strong>, a one-way hash, can’t convert those hashes back to the original, and it’s locality insensitive, opposite with Simhash.</li>
<li><strong>Diffie-Hellman key exchange</strong>, private key and public key.</li>
<li><strong>Linear programming</strong>, is used to maximize something given some constraints, such as the knapsack problem.</li>
</ul>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/">GeeksforGeeks</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/08/31/algorithm-the-last/" data-id="ckrrxh5dp00059svl9myl4fbp" data-title="Algorithm the last but not the least" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/algorithm/" rel="tag">algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/dynamic-programing/" rel="tag">dynamic programing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/k-nearest-neighbors/" rel="tag">k-nearest-neighbors</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/more-algorithms/" rel="tag">more algorithms</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-graph-greedy-algorithms" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/08/28/graph-greedy-algorithms/" class="article-date">
  <time class="dt-published" datetime="2018-08-27T16:01:45.000Z" itemprop="datePublished">2018-08-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/quotes/">quotes</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/08/28/graph-greedy-algorithms/">Graph and Greedy algorithms</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Breadth-first-search"><a href="#Breadth-first-search" class="headerlink" title="Breadth-first search"></a>Breadth-first search</h3><ul>
<li><p>Breadth-first search is used to calculate the shortest path for an unweighted graph.</p>
</li>
<li><p>And answer the following questions:</p>
<ul>
<li>Question type 1: Is there a path from node A to node B?</li>
<li>Question type 2: What is the shortest path from node A to node B?</li>
</ul>
</li>
<li><p>A-&gt;H, with breadth first search, the shortest path is A-&gt;C-&gt;G-&gt;H<br><img src="/leptons-bosons/.io//breadth-first.png" alt="unweighted directed graph: A-&gt;H"></p>
</li>
<li><p>Caution: once you check someone, make sure you don’t check them again. Otherwise, you might end up in an infinite loop.</p>
</li>
</ul>
<h3 id="Dijkstra’s-algorithm"><a href="#Dijkstra’s-algorithm" class="headerlink" title="Dijkstra’s algorithm"></a>Dijkstra’s algorithm</h3><ul>
<li>Dijkstra’s algorithm is used to calculate the shortest path for a weighted graph.</li>
<li>Dijkstra’s algorithm works when all the weights are positive.</li>
<li>If you have negative weights, use the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm">Bellman-Ford algorithm</a>.</li>
<li>Same graph as shown above but with weighted value(the cost of the path), A-&gt;H, we will get another path(A-&gt;B-&gt;F-&gt;G-&gt;H):<br><img src="/leptons-bosons/.io//dijkstra-algorithm.png" alt="weighted directed graph: A-&gt;H"></li>
<li>Dijkstra’s algorithm iteration for the above graph:<br><img src="/leptons-bosons/.io//dijkstra-algorithm-iteration.png" alt="dijkstra&#39;s algorithm iteration"></li>
</ul>
<h3 id="Gready-algorithm"><a href="#Gready-algorithm" class="headerlink" title="Gready algorithm"></a>Gready algorithm</h3><ul>
<li>Typical applicated case, NP(nondeterministic polynomial time)-complete problems:<ul>
<li>The knapsack problem</li>
<li>The set-covering problem</li>
<li>Traveling salesperson</li>
</ul>
</li>
<li>Approximation algorithms, NP-complete problems, how can you tell if the problem is a NP-complete problem:<ul>
<li>Your algorithm runs quickly with a handful of items but really slows down with more items.</li>
<li>“All combinations of X” usually point to an NP-complete problem.</li>
<li>Do you have to calculate “every possible version” of X because you can’t break it down into smaller sub-problems? Might be NP-complete.</li>
<li>If your problem involves a sequence (such as a sequence of cities, like traveling salesperson), and it’s hard to solve, it might be NP-complete.</li>
<li>If your problem involves a set (like a set of radio stations) and it’s hard to solve, it might be NP-complete.</li>
<li>Can you restate your problem as the set-covering problem or the traveling-salesperson problem? Then your problem is definitely NP-complete.</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/08/28/graph-greedy-algorithms/" data-id="ckrrxh5ee00119svl2xek9tiy" data-title="Graph and Greedy algorithms" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/algorithm/" rel="tag">algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/breadth-first-search/" rel="tag">breadth-first search</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/dijkstra/" rel="tag">dijkstra</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/greedy/" rel="tag">greedy</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ethernet-fibrechannel-infiniband" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/08/26/ethernet-fibrechannel-infiniband/" class="article-date">
  <time class="dt-published" datetime="2018-08-26T00:52:43.000Z" itemprop="datePublished">2018-08-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/original/">original</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/08/26/ethernet-fibrechannel-infiniband/">Ethernet, Fibre Channel and InfiniBand</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Ethernet and its slower speed cousins are the networking technology of choice for client-server networks, Fibre Channel is the fabric technology for storage applications, and InfiniBand Architecture is introduced as a fabric technology for CPU-memory complex to adapter connections.</p>
<table>
<thead>
<tr>
<th align="left">Technology</th>
<th align="left">Standards Body</th>
<th align="left">Signaling Speed(Y2018)</th>
<th align="left">First Standard</th>
<th align="left">Maximum frame size</th>
<th align="left">Primary Application</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Ethernet</td>
<td align="left"><a target="_blank" rel="noopener" href="https://ethernetalliance.org/">IEEE</a></td>
<td align="left">200Gb</td>
<td align="left">Y1999</td>
<td align="left">1.5K/9k</td>
<td align="left">Local Area Network(LAN)</td>
</tr>
<tr>
<td align="left">Fibre Channel</td>
<td align="left"><a target="_blank" rel="noopener" href="https://fibrechannel.org/">ANSI</a></td>
<td align="left">128Gb</td>
<td align="left">Y1988</td>
<td align="left">2K</td>
<td align="left">Storage Area Network(SAN)</td>
</tr>
<tr>
<td align="left">InfiniBand</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.infinibandta.org/">InfiniBand Trade Association</a></td>
<td align="left">600Gb</td>
<td align="left">Y2001</td>
<td align="left">4K</td>
<td align="left">IO Area Network(IAN)</td>
</tr>
</tbody></table>
<p>Network Technology Choices in the Data Center(bandwidth, latency and reliability):<br><img src="/leptons-bosons/.io//datacenter_choice.png" alt=" Network Technology Choices in the Data Center"></p>
<h3 id="RoadMap"><a href="#RoadMap" class="headerlink" title="RoadMap"></a>RoadMap</h3><ul>
<li><p>Fibre Channel RoadMap<br><img src="/leptons-bosons/.io//fibrechannle_roadmap.png" alt="Fibre Channel RoadMap"></p>
</li>
<li><p>Fibre Channel is doomed:</p>
<ul>
<li>Modern Ethernet Outperforms Fibre Channel</li>
<li>iSER(iSCSI Extensions for RDMA) Turbocharges iSCSI</li>
<li>Flash: Fast Storage Needs Fast Networking, but speed of FC’s improvement is slower than ethernet</li>
</ul>
</li>
<li><p>Ethernet RoadMap<br><img src="/leptons-bosons/.io//ethernet_roadmap.png" alt="Ethernet RoadMap"></p>
</li>
<li><p>InfiniBand RoadMap<br><img src="/leptons-bosons/.io//InfiniBand_roadmap.jpg" alt="InfiniBand RoadMap"></p>
</li>
</ul>
<h3 id="Reliability-congestion-control-over-subscription-or-over-commit"><a href="#Reliability-congestion-control-over-subscription-or-over-commit" class="headerlink" title="Reliability, congestion control, over-subscription or over-commit"></a>Reliability, congestion control, over-subscription or over-commit</h3><ul>
<li><p>Fibre Channel, Lossless data delivery with buffer to buffer credit, congestion strategy is “pause it”.<br><img src="/leptons-bosons/.io//fibrechannel_cogestion.png" alt="Fibre Channel Congestion Bandwidth"></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://fibrechannel.org/wp-content/uploads/2018/02/FCIA_Fibre_Channel_Performance_Congestion_Slowdrain_and_Over_Utilization_Final.pdf">Fibre Channel Performance: Congestion, Slow Drain, and Over Utilization</a></p>
</li>
<li><p>Ethernet, based on Transport Layer Protocols, congestion strategy is “drop it”.<br><img src="/leptons-bosons/.io//ethernet_congestion_control.jpg" alt="TCP Congestion Bandwidth Utiliztion"></p>
</li>
</ul>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>There are a variety of switched fabrics and networks to apply to the problem of server I/O. The selection of the “best” technology depends on particular situations, legacy installations, and the desired application. The Ethernet technologies are well suited for client-server connections in a LAN environment, and Fibre Channel technology is the well suited for storage applications in a SAN. InfiniBand is a new technology well suited for interconnection of CPU-memory complexes to I/O in an IAN. A fabric-based IAN enables clustering as well as connections to I/O controllers.</p>
<p>The comparison of these three, layered technologies demonstrated a striking similarity, yet there are subtle differences evident in specific installations. The management model of these three technologies is different, each one supporting the needs of the application. Ethernet network management is loosely defined, and is tolerant of peer nodes joining and leaving segments. There is no need for a node to communicate with a central management entity. This pure peer-to-peer network has few dependencies on the existence of particular nodes, which can be good when a network spans hundreds of offices.</p>
<p>Management of a fabric is better defined out of necessity. The fabric manager must configure each node as it joins the fabric. It implements partitioning and provides a central directory to discover attached nodes. Fibre Channel defines a fabric manager to reside in the fabric, and relies upon proprietary implementations to expand management across many switches. InfiniBand takes this one step further and defines the management entity such that it can reside on any node of the network. It configures and manages the subnet in a manner defined by the InfiniBand Architecture Specification.</p>
<p>Application protocols traditionally favor particular technologies. Most client-server communication is based on TCP/IP or similar protocols. Storage protocols are based on SCSI-3 in the enterprise environment. The protocols used between CPU-memory complexes and adapters have been a mix of bus protocols and custom control messages, and InfiniBand Architecture will standardize these connections. InfiniBand also enables a new level of clustering by allowing CPU-memory complexes to directly communicate using the IAN.</p>
<p>The future belongs to ethernet and infiband, Fibre Channle will be out?</p>
<p>Ethernet is really easy to build for one, two, three, even four user Ethernet SAN, cause you’ll end up with oversubscription. Unfortunately, errors can still happen- Ethernet is not a guaranteed in-order delivery, nor a guaranteed latency, Fibre Channel is.</p>
<p>With fibre channel, in-order guaranteed latency is possible, and scalable to larger amounts of systems.</p>
<p>Ultimately, with Ethernet you can find yourself with multiple drop-frames and other issues during a production. </p>
<h3 id="Alliances-or-Standards"><a href="#Alliances-or-Standards" class="headerlink" title="Alliances or Standards"></a>Alliances or Standards</h3><ul>
<li><a target="_blank" rel="noopener" href="https://ethernetalliance.org/">Ethernet Alliance</a></li>
<li><a target="_blank" rel="noopener" href="https://www.openfabrics.org/">Open Fabric Alliance</a></li>
<li><a target="_blank" rel="noopener" href="https://www.infinibandta.org/">InfiniBand Association</a></li>
<li><a target="_blank" rel="noopener" href="https://fibrechannel.org/">Fibre Channel Industry Association</a></li>
</ul>
<h3 id="Forum"><a href="#Forum" class="headerlink" title="Forum"></a>Forum</h3><ul>
<li><a target="_blank" rel="noopener" href="https://edgeoptic.com/">Edge Optic</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/08/26/ethernet-fibrechannel-infiniband/" data-id="ckrrxh5e1000g9svl9tro768s" data-title="Ethernet, Fibre Channel and InfiniBand" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/ethernet/" rel="tag">ethernet</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/fibre-channel/" rel="tag">fibre channel</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/hardware/" rel="tag">hardware</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/infiniband/" rel="tag">infiniband</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-softether-vpn-on-cloud" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/08/25/softether-vpn-on-cloud/" class="article-date">
  <time class="dt-published" datetime="2018-08-25T13:02:19.000Z" itemprop="datePublished">2018-08-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/reference/">reference</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/08/25/softether-vpn-on-cloud/">Softether VPN on Cloud</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="I-Start-a-Compute-Instance-on-Cloud"><a href="#I-Start-a-Compute-Instance-on-Cloud" class="headerlink" title="I. Start a Compute Instance on Cloud"></a>I. Start a Compute Instance on Cloud</h3><p>You can start the instance in <a target="_blank" rel="noopener" href="https://aws.amazon.com/">aws</a>, <a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/">azure</a> or <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/en">aliyun</a>, make sure ports 22(tcp), 443(tcp), 500(tcp and udp), 992(tcp and udp), 1194(tcp and udp), 4500(tcp and udp), and 5555(tcp and udp) are opened. Recommanded images are ubuntu or centos.</p>
<h3 id="II-Install-SoftEther-on-the-Instance"><a href="#II-Install-SoftEther-on-the-Instance" class="headerlink" title="II. Install SoftEther on the Instance"></a>II. Install SoftEther on the Instance</h3><p>First, get <a target="_blank" rel="noopener" href="https://www.softether.org/">softether VPN</a>, wget <a target="_blank" rel="noopener" href="https://www.softether-download.com/files/softether/v4.25-9656-rtm-2018.01.15-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.25-9656-rtm-2018.01.15-linux-x64-64bit.tar.gz">https://www.softether-download.com/files/softether/v4.25-9656-rtm-2018.01.15-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.25-9656-rtm-2018.01.15-linux-x64-64bit.tar.gz</a>, you also can get the other versions <a target="_blank" rel="noopener" href="https://www.softether-download.com/files/softether/">here</a>.<br>Then extract the file, and change into the extracted directory, type <a href>./.install</a> and hit Enter, to compile vpn in your enviroment.</p>
<h3 id="III-Start-vpn-Server-and-Configure"><a href="#III-Start-vpn-Server-and-Configure" class="headerlink" title="III. Start vpn Server and Configure"></a>III. Start vpn Server and Configure</h3><h4 id="Start-vpn-server"><a href="#Start-vpn-server" class="headerlink" title="Start vpn server"></a>Start vpn server</h4><p>Type <a href>./vpnserver start</a> to start the vpn server<br>You can stop the vpnserver with type <a href>./vpnserver stop</a></p>
<h4 id="Check-to-make-sure-SoftEther-is-working"><a href="#Check-to-make-sure-SoftEther-is-working" class="headerlink" title="Check to make sure SoftEther is working"></a>Check to make sure SoftEther is working</h4><p>Here we will run a quick check to make sure everything is working as desired.</p>
<p>Type <a href>cd ./vpnserver</a> and hit Enter<br>Type <a href>./vpncmd</a> and hit Enter<br>Type <a href>3</a> to choose the third option and hit Enter<br>Type <a href>check</a> and hit Enter to run the test</p>
<h4 id="Configuring-SoftEther"><a href="#Configuring-SoftEther" class="headerlink" title="Configuring SoftEther"></a>Configuring SoftEther</h4><p>Next we need to configure SoftEther so we can connect to it from our PC client.</p>
<p> <strong>1</strong> While you’re still in the vpnserver directory, type <a href>./vpncmd</a><br> <strong>2</strong> Choose option <a href>1</a> and hit Enter<br> <strong>3</strong> For the hostname IP, input the IP address of the EC2 server instance followed by a colon and port 5555. You can find the IP of your server instance on the EC2 dashboard. The input should look like this: 123.123.123.123:5555<br> <strong>4</strong> In the next step, leave the input blank and hit Enter to connect from the Server Admin node<br> <strong>5</strong> The prompt should now read “VPN Server&gt;”. Enter <a href>ServerPasswordSet</a> and hit Enter<br> <strong>6</strong> Enter a password of your choice and type it again to confirm<br> <strong>7</strong> Next, type <a href>HubCreate <em>VPN</em></a> and enter a new password that you will use to log in when you are not in Server Admin mode<br> <strong>8</strong> Type <a href>Hub <em>VPN</em></a> and hit Enter<br> <strong>9</strong> Type <a href>SecureNatEnable</a><br><strong>10</strong> Type <a href>UserCreate <em>paul</em></a>, replacing <em>“paul”</em> with a username of your choice.<br><strong>11</strong> You will be asked to enter a Group Name, Full Name, and Description for the new user. Leave the Group Name blank, and use whatever you want for the other two.<br><strong>12</strong> Type <a href>UserPasswordSet <em>paul</em></a>, replacing <em>“paul”</em> with the username you just created. Enter and confirm a password for that user. <strong>For android/ios the password  with special characters are not recommended except alphabet or digtial</strong>.<br><strong>13</strong> Repeat steps 10-12 for as many users as you wish.<br><strong>14</strong> A couple notes here. In step 9, we use Secure NAT as the means to connect hubs to the server network. Another option is Local Bridge connection, but it’s more complicated and requires you set up a DHCP server. Secure NAT takes care of the DHCP server for you.<br><strong>15</strong> Type <a href>Hub</a> without the hub name, then hit enter to exit Hub admin, return to the upper menu server admin. You can also type <a href>Exit</a> to exit vpncmd immediately.</p>
<p>In step 12, we use the UserPasswordSet command to enable password authentication on a particular user. SoftEther supports several other types of authentication, which can vary between users. They include NT domain, anonymous, RADIUS, individual certificate, and signed certificate authentication.</p>
<p>Create group/user and set user password console output:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"># ./vpncmd </span><br><span class="line">vpncmd command - SoftEther VPN Command Line Management Utility</span><br><span class="line">SoftEther VPN Command Line Management Utility (vpncmd command)</span><br><span class="line">Version 4.25 Build 9656   (English)</span><br><span class="line">Compiled 2018/01/15 10:17:04 by yagi at pc33</span><br><span class="line">Copyright (c) SoftEther VPN Project. All Rights Reserved.</span><br><span class="line"></span><br><span class="line">By using vpncmd program, the following can be achieved. </span><br><span class="line"></span><br><span class="line">1. Management of VPN Server or VPN Bridge </span><br><span class="line">2. Management of VPN Client</span><br><span class="line">3. Use of VPN Tools (certificate creation and Network Traffic Speed Test Tool)</span><br><span class="line"></span><br><span class="line">Select 1, 2 or 3: 1</span><br><span class="line"></span><br><span class="line">Specify the host name or IP address of the computer that the destination VPN Server or VPN Bridge is operating on. </span><br><span class="line">By specifying according to the format &#x27;host name:port number&#x27;, you can also specify the port number. </span><br><span class="line">(When the port number is unspecified, 443 is used.)</span><br><span class="line">If nothing is input and the Enter key is pressed, the connection will be made to the port number 8888 of localhost (this computer).</span><br><span class="line">Hostname of IP Address of Destination: </span><br><span class="line"></span><br><span class="line">If connecting to the server by Virtual Hub Admin Mode, please input the Virtual Hub name. </span><br><span class="line">If connecting by server admin mode, please press Enter without inputting anything.</span><br><span class="line">Specify Virtual Hub Name:    </span><br><span class="line">Password: **************</span><br><span class="line"></span><br><span class="line">Connection has been established with VPN Server &quot;localhost&quot; (port 443).</span><br><span class="line"></span><br><span class="line">You have administrator privileges for the entire VPN Server.</span><br><span class="line"></span><br><span class="line">VPN Server&gt;Hub VPN8</span><br><span class="line">VPN Server/VPN8&gt;Grouplist</span><br><span class="line">GroupList command - Get List of Groups</span><br><span class="line">Item       |Value</span><br><span class="line">-----------+--------</span><br><span class="line">Group Name |self</span><br><span class="line">Full Name  |self</span><br><span class="line">Description|for self</span><br><span class="line">Num Users  |3</span><br><span class="line">The command completed successfully.</span><br><span class="line"></span><br><span class="line">VPN Server/VPN8&gt;GroupCreate guest</span><br><span class="line">GroupCreate command - Create Group</span><br><span class="line">Group Full Name: guest</span><br><span class="line"></span><br><span class="line">Group Description: for guest</span><br><span class="line"></span><br><span class="line">The command completed successfully.</span><br><span class="line"></span><br><span class="line">VPN Server/VPN8&gt;?</span><br><span class="line">VPN Server/VPN8&gt;UserCreate desktop</span><br><span class="line">UserCreate command - Create User </span><br><span class="line">Assigned Group Name: self</span><br><span class="line"></span><br><span class="line">User Full Name: desktop</span><br><span class="line"></span><br><span class="line">User Description: for desktop</span><br><span class="line"></span><br><span class="line">The command completed successfully.</span><br><span class="line"></span><br><span class="line">VPN Server/VPN8&gt;UserPasswordSet desktop</span><br><span class="line">UserPasswordSet command - Set Password Authentication for User Auth Type and Set Password</span><br><span class="line">Please enter the password. To cancel press the Ctrl+D key.</span><br><span class="line"></span><br><span class="line">Password: *******</span><br><span class="line">Confirm input: *******</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">The command completed successfully.</span><br><span class="line">VPN Server/VPN8&gt;exit</span><br></pre></td></tr></table></figure>

<h4 id="Set-up-L2TP-IPSec-on-the-VPN-server"><a href="#Set-up-L2TP-IPSec-on-the-VPN-server" class="headerlink" title="Set up L2TP/IPSec on the VPN server"></a>Set up L2TP/IPSec on the VPN server</h4><p>We decided to use L2TP/IPSec as the VPN protocol in this tutorial for three main reason: a) it’s more secure than PPTP, b) it’s easier to set up than OpenVPN, and c) it works across multiple operating systems, unlike the Windows-only SSTP.</p>
<p><strong>1</strong> While still in vpncmd’s “VPN Server&gt;” prompt, enter <a href>IPsecEnable</a><br><strong>2</strong> Next you are given a series of configuration prompts. Below we’ll give our recommended answers:</p>
<ul>
<li>Enable L2TP over IPsec Server Function – <a href>yes</a>, enable the VPN for use on multiple devices including Windows PC, Mac OSX, iOS, and Android</li>
<li>Enable Raw L2TP Server Function – <a href>no</a>, do not allow connections without encryption</li>
<li>Enable EtherIP / L2TPv3 over IPsec Server Function – <a href>yes</a>, allow routers with this built-in function to connect</li>
</ul>
<p><strong>3</strong> Next comes the pre-shared key. This is a password with a maximum of nine characters. Enter whatever you like.<br><strong>4</strong> For “Default Virtual HUB in a case of omitting the HUB on the Username:”, simply enter <em>VPN</em></p>
<p>That’s it! Make sure you write down all the passwords you’ve created above and what each one is for.</p>
<h3 id="IV-Client-Configure"><a href="#IV-Client-Configure" class="headerlink" title="IV. Client Configure"></a>IV. Client Configure</h3><p>For windonws or macos, you could download the vpn client to connect the vpn server:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.softether.org/4-docs/2-howto/9.L2TPIPsec_Setup_Guide_for_SoftEther_VPN_Server/4.Windows_L2TP_Client_Setup">Windows L2TP Client Setup</a></li>
<li><a target="_blank" rel="noopener" href="https://www.softether.org/4-docs/2-howto/9.L2TPIPsec_Setup_Guide_for_SoftEther_VPN_Server/5.Mac_OS_X_L2TP_Client_Setup">Mac OS X L2TP Client Setup</a></li>
</ul>
<p>For ios mobile device, <a target="_blank" rel="noopener" href="https://www.softether.org/4-docs/2-howto/9.L2TPIPsec_Setup_Guide_for_SoftEther_VPN_Server/2.iPhone_iPad_L2TP_Client_Setting">iPhone/iPad L2TP Client Setup</a><br>For android mobile device, <a target="_blank" rel="noopener" href="https://www.softether.org/4-docs/2-howto/9.L2TPIPsec_Setup_Guide_for_SoftEther_VPN_Server/3.Android_L2TP_Client_Setup">Android L2TP Client Setup</a></p>
<h3 id="Tips-for-AWS-Ubuntu"><a href="#Tips-for-AWS-Ubuntu" class="headerlink" title="Tips for AWS Ubuntu"></a>Tips for AWS Ubuntu</h3><ol>
<li>Set password after intall: sudo passwd</li>
<li>Install compile enviroment: apt-get update; apt-get install gcc make</li>
</ol>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a target="_blank" rel="noopener" href="https://www.softether.org/4-docs/2-howto">SoftetherVPN Howto</a><br><a target="_blank" rel="noopener" href="https://www.comparitech.com/blog/vpn-privacy/how-to-set-up-your-own-free-vpn-with-softether-and-amazon-web-services/">How to make a free VPN with SoftEther and an AWS EC2 Linux instance</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/08/25/softether-vpn-on-cloud/" data-id="ckrrxh5f4002b9svl8gb14rf2" data-title="Softether VPN on Cloud" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/tool/" rel="tag">tool</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/vpn/" rel="tag">vpn</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-recursive" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/08/12/recursive/" class="article-date">
  <time class="dt-published" datetime="2018-08-11T17:05:36.000Z" itemprop="datePublished">2018-08-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/original/">original</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/08/12/recursive/">Recursion, divide and conquer</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="the-stack"><a href="#the-stack" class="headerlink" title="the stack"></a>the stack</h3><p>Base actions are push and pop, just like FILO(first in last out) queue.</p>
<h3 id="base-case-and-recursive-case"><a href="#base-case-and-recursive-case" class="headerlink" title="base case and recursive case"></a>base case and recursive case</h3><p>Every recursive function has two parts: the base case, and the recursive case.</p>
<h3 id="divide-and-conquer"><a href="#divide-and-conquer" class="headerlink" title="divide and conquer"></a>divide and conquer</h3><p>Suppose you’re a farmer with a plot of land. You want to divide this farm evenly into square plots. You want the plots to be as big as possible. Just divide to get the largest square, and repeat the step with the remaining part.</p>
<h3 id="inductive-proofs"><a href="#inductive-proofs" class="headerlink" title="inductive proofs"></a>inductive proofs</h3><p>For example, suppose I want to prove that I can climb to the top of a ladder. In the inductive case, if my legs are on a rung, I can put my legs on the next rung. So if I’m on rung 2, I can climb to rung 3. That’s the inductive case.</p>
<h3 id="Tower-of-Hanoi"><a href="#Tower-of-Hanoi" class="headerlink" title="Tower of Hanoi"></a>Tower of Hanoi</h3><p>The objective of the puzzle is to move the entire stack to another rod, obeying the following simple rules:</p>
<ul>
<li>Only one disk can be moved at a time.</li>
<li>Each move consists of taking the upper disk from one of the stacks and placing it on top of another stack or on an empty rod.</li>
<li>No disk may be placed on top of a smaller disk.</li>
</ul>
<p>With 3 disks, the puzzle can be solved in 7 moves. The minimal number of moves required to solve a Tower of Hanoi puzzle is 2^n − 1, where n is the number of disks.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">static int times = 0;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">  * @param n, layers of tower</span><br><span class="line">  * @param A, the source</span><br><span class="line">  * @param B, the destination</span><br><span class="line">  * @param C, the swap</span><br><span class="line">  */ </span><br><span class="line">static void hanoi(int n, char A, char B, char C);</span><br><span class="line"></span><br><span class="line">static void hanoi(int n, char A, char B, char C)</span><br><span class="line">&#123;</span><br><span class="line">    if (n &gt; 0) &#123;</span><br><span class="line">        hanoi(n - 1, A, C, B);</span><br><span class="line">        printf(&quot;%c -&gt; %c &quot;, A, C);</span><br><span class="line">        hanoi(n - 1, C, B, A);</span><br><span class="line"></span><br><span class="line">        times++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    int layer;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    layer = 3, times = 0;</span><br><span class="line">    hanoi(layer, &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;);</span><br><span class="line">    printf(&quot;layer = %d, times %d = 2^%d - 1\n&quot;, layer, times, layer);</span><br><span class="line"></span><br><span class="line">    layer = 4, times = 0;</span><br><span class="line">    hanoi(layer, &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;);</span><br><span class="line">    printf(&quot;layer = %d, times %d = 2^%d - 1\n&quot;, layer, times, layer);</span><br><span class="line"></span><br><span class="line">    layer = 7, times = 0;</span><br><span class="line">    hanoi(layer, &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;);</span><br><span class="line">    printf(&quot;layer = %d, times %d = 2^%d - 1\n&quot;, layer, times, layer);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Fibonacci-sequence"><a href="#Fibonacci-sequence" class="headerlink" title="Fibonacci sequence"></a>Fibonacci sequence</h3><p>A typical recursive example, F(1)=1, F(2)=1, F(n)=F(n-1)+F(n-2) (n&gt;=2，n∈N)<br>As described above, the base case is F(1)=1, F(2)=1, and the recursive case is F(n)=F(n-1)+F(n-2).</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">static unsigned long fibonacci(int n)</span><br><span class="line">&#123;</span><br><span class="line">  if (n == 1 || n == 2) &#123;</span><br><span class="line">    return 1;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return fibonacci(n - 1) + fibonacci(n - 2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  int n;</span><br><span class="line"></span><br><span class="line">  if (argc != 2) &#123;</span><br><span class="line">    printf(&quot;argc invalid\n&quot;);</span><br><span class="line">    return -1;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  n = atoi(argv[1]);</span><br><span class="line">  printf(&quot;fibonacci n = %d\n&quot;, n);</span><br><span class="line"></span><br><span class="line">  printf(&quot;f(%d) = %lu\n&quot;, n, fibonacci(n));</span><br><span class="line"></span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Some other fibonacci interesting sequences</p>
<ul>
<li>Fibonacci Brick Wall Patterns, The point of this activity is to see how many ways you can build a brick wall using the given amount of bricks.<ul>
<li>Each wall needs to be two units tall.</li>
<li>Each brick standing on end is two units tall.</li>
<li>Each brick laying on it’s side is one unit tall.</li>
<li>You are first given one, then two, three, etc.</li>
<li>For one brick there is only one method of building a wall. Two methods for two, and three methods for three.</li>
<li>How many ways are there to build a wall with four bricks, five?Show your work, and how does this tie into the Fibonacci sequence?</li>
</ul>
</li>
</ul>
<h3 id="quick-sort"><a href="#quick-sort" class="headerlink" title="quick sort"></a>quick sort</h3><p>Another typical recursive example.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">static int array[] = &#123;15, 9, 23, 21, 111, 101, 98, 101, 0, 1&#125;;</span><br><span class="line">static int asize = sizeof(array) / sizeof(int);</span><br><span class="line"></span><br><span class="line">static void dump_array(int array[], int size, const char *prefix)</span><br><span class="line">&#123;</span><br><span class="line">  int i;</span><br><span class="line"></span><br><span class="line">  if (NULL != prefix) &#123;</span><br><span class="line">    printf(&quot;%s: &quot;, prefix);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  for (i = 0; i &lt; asize; i++) &#123;</span><br><span class="line">    printf(&quot;%d &quot;, array[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(&quot;\n&quot;);</span><br><span class="line"></span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int partition(int array[], int size)</span><br><span class="line">&#123;</span><br><span class="line">  int i, pivot;</span><br><span class="line">  int s;</span><br><span class="line"></span><br><span class="line">  pivot = size / 2;</span><br><span class="line"></span><br><span class="line">  for (i = 0; i &lt; size; i++) &#123;</span><br><span class="line">    if (i == pivot) continue;</span><br><span class="line"></span><br><span class="line">    if (array[i] &lt; array[pivot]) &#123; /* if &lt; pivot, and on the right */</span><br><span class="line">      if (i == (pivot + 1)) &#123;</span><br><span class="line">        s = array[pivot];</span><br><span class="line">        array[pivot] = array[i];</span><br><span class="line">        array[i] = s;</span><br><span class="line"></span><br><span class="line">        pivot = i;</span><br><span class="line">      &#125; else if (i &gt; pivot) &#123;</span><br><span class="line">        s = array[i];</span><br><span class="line">        array[i] = array[pivot + 1];</span><br><span class="line">        array[pivot + 1] = array[pivot];</span><br><span class="line">        array[pivot] = s;</span><br><span class="line"></span><br><span class="line">        pivot += 1;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else if (array[i] &gt; array[pivot]) &#123; /* if &gt; pivot, and on the left */</span><br><span class="line">      if (i &lt; pivot) &#123;</span><br><span class="line">        s = array[pivot];</span><br><span class="line">        array[pivot] = array[i];</span><br><span class="line">        array[i] = s;</span><br><span class="line"></span><br><span class="line">        pivot = i;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return pivot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void qsort(int array[], int size)</span><br><span class="line">&#123;</span><br><span class="line">  int pivot;</span><br><span class="line"></span><br><span class="line">  if (size &lt; 2) return;</span><br><span class="line"></span><br><span class="line">  pivot = partition(array, size);</span><br><span class="line"></span><br><span class="line">  qsort(&amp;array[0], pivot);</span><br><span class="line">  qsort(&amp;array[pivot + 1], size - pivot - 1);</span><br><span class="line"></span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  dump_array(array, asize, &quot;Before sort&quot;);</span><br><span class="line"></span><br><span class="line">  qsort(array, asize);</span><br><span class="line"></span><br><span class="line">  dump_array(array, asize, &quot; After sort&quot;);</span><br><span class="line"></span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Pascal’s-triangle"><a href="#Pascal’s-triangle" class="headerlink" title="Pascal’s triangle"></a><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Pascal%27s_triangle">Pascal’s triangle</a></h3><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li>程序员的数学（日 结城浩）</li>
<li><a target="_blank" rel="noopener" href="https://algs4.cs.princeton.edu/home/">Algorithms, 4th Edition</a></li>
<li>Grokking Algorithms: An illustrated guide for programmers and other curious people</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/08/12/recursive/" data-id="ckrrxh5f000249svlhz6w4ndm" data-title="Recursion, divide and conquer" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/algorithm/" rel="tag">algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/quick-sort/" rel="tag">quick sort</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Big-O" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/08/04/Big-O/" class="article-date">
  <time class="dt-published" datetime="2018-08-04T13:38:15.000Z" itemprop="datePublished">2018-08-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/original/">original</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/08/04/Big-O/">Big-O Notation</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Some common algorithms and their big-O noations</p>
<table>
<thead>
<tr>
<th align="left">constant time</th>
<th align="left">logarithmic time</th>
<th align="left">linear time</th>
<th align="left">linear-multiply-log</th>
<th align="left">square time</th>
<th align="left">factorial time</th>
</tr>
</thead>
<tbody><tr>
<td align="left">O(1)</td>
<td align="left">O(log2n)</td>
<td align="left">O(n)</td>
<td align="left">O(nlog2n)</td>
<td align="left">O(n2)</td>
<td align="left">O(n!)</td>
</tr>
<tr>
<td align="left">hash</td>
<td align="left">binary search</td>
<td align="left">simple search</td>
<td align="left">quik/merge sort</td>
<td align="left">selection sort</td>
<td align="left">traveling salesperson</td>
</tr>
</tbody></table>
<h3 id="O-log2n"><a href="#O-log2n" class="headerlink" title="O(log2n)"></a>O(log2n)</h3><ul>
<li><p>logarithmic time<br><img src="/leptons-bosons/.io//log2n.png" alt="logarithmic time"></p>
</li>
<li><p>code of binary search</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">static int array[] = &#123;9, 15, 21, 23, 57, 98, 101, 111&#125;;</span><br><span class="line">static int asize = sizeof(array) / sizeof(int);</span><br><span class="line"></span><br><span class="line">static void dump_array(int array[], int size, const char *prefix)</span><br><span class="line">&#123;</span><br><span class="line">  int i;</span><br><span class="line"></span><br><span class="line">  if (NULL != prefix) &#123;</span><br><span class="line">    printf(&quot;%s: &quot;, prefix);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  for (i = 0; i &lt; asize; i++) &#123;</span><br><span class="line">    printf(&quot;array[%d] = %d, &quot;, i, array[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(&quot;\n&quot;);</span><br><span class="line"></span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int bsearch(int array[], int size, int key)</span><br><span class="line">&#123;</span><br><span class="line">  int i, low, high, guess;</span><br><span class="line"> </span><br><span class="line">  low = 0; high = size - 1;</span><br><span class="line"></span><br><span class="line">  while (low &lt;= high) &#123;</span><br><span class="line">    guess = (low + high) / 2;</span><br><span class="line"></span><br><span class="line">    if (key &gt; array[guess]) &#123;</span><br><span class="line">      low = guess + 1;</span><br><span class="line">    &#125; else if (key &lt; array[guess]) &#123;</span><br><span class="line">      high = guess - 1;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      printf(&quot;key %d index is %d\n&quot;, key, guess);</span><br><span class="line">      return guess;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  int i, key[] = &#123;0, 9, 15, 57, 98, 101, 111, 230&#125;;</span><br><span class="line"></span><br><span class="line">  dump_array(array, asize, &quot;Array&quot;);</span><br><span class="line"></span><br><span class="line">  for (i = 0; i &lt; sizeof(key) / sizeof(int); i++) &#123;</span><br><span class="line">    if (bsearch(array, asize, key[i]) &lt; 0) &#123;</span><br><span class="line">      printf(&quot;key %d is not in array\n&quot;, key[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="O-n"><a href="#O-n" class="headerlink" title="O(n)"></a>O(n)</h3><ul>
<li><p>linear time<br><img src="/leptons-bosons/.io//n.png" alt="linear time"></p>
</li>
<li><p>code of simple search</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">static int array[] = &#123;9, 15, 21, 23, 57, 98, 101, 111&#125;;</span><br><span class="line">static int asize = sizeof(array) / sizeof(int);</span><br><span class="line"></span><br><span class="line">static void dump_array(int array[], int size, const char *prefix)</span><br><span class="line">&#123;</span><br><span class="line">  int i;</span><br><span class="line"></span><br><span class="line">  if (NULL != prefix) &#123;</span><br><span class="line">    printf(&quot;%s: &quot;, prefix);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  for (i = 0; i &lt; asize; i++) &#123;</span><br><span class="line">    printf(&quot;array[%d] = %d, &quot;, i, array[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(&quot;\n&quot;);</span><br><span class="line"></span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int ssearch(int array[], int size, int key)</span><br><span class="line">&#123;</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; size; i++) &#123;</span><br><span class="line">    if (key == array[i]) &#123;</span><br><span class="line">      printf(&quot;key %d index is %d\n&quot;, key, i);</span><br><span class="line">      return i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  int i, key[] = &#123;0, 9, 15, 57, 98, 101, 111, 230&#125;;</span><br><span class="line"></span><br><span class="line">  dump_array(array, asize, &quot;Array&quot;);</span><br><span class="line"></span><br><span class="line">  for (i = 0; i &lt; sizeof(key) / sizeof(int); i++) &#123;</span><br><span class="line">    if (ssearch(array, asize, key[i]) &lt; 0) &#123;</span><br><span class="line">      printf(&quot;key %d is not in array\n&quot;, key[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="O-nlog2n"><a href="#O-nlog2n" class="headerlink" title="O(nlog2n)"></a>O(nlog2n)</h3><ul>
<li>linear-multiply-log<br><img src="/leptons-bosons/.io//nlog2n.png" alt="linear-multiply-log"></li>
</ul>
<h3 id="O-n2"><a href="#O-n2" class="headerlink" title="O(n2)"></a>O(n2)</h3><ul>
<li><p>square time<br><img src="/leptons-bosons/.io//n2.png" alt="square time"></p>
</li>
<li><p>code of selection sort</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">static int array[] = &#123;15, 9, 23, 21, 111, 101, 98&#125;;</span><br><span class="line">static int asize = sizeof(array) / sizeof(int);</span><br><span class="line"></span><br><span class="line">static void dump_array(int array[], int size, const char *prefix)</span><br><span class="line">&#123;</span><br><span class="line">  int i;</span><br><span class="line"></span><br><span class="line">  if (NULL != prefix) &#123;</span><br><span class="line">    printf(&quot;%s: &quot;, prefix);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  for (i = 0; i &lt; asize; i++) &#123;</span><br><span class="line">    printf(&quot;array[%d] = %d, &quot;, i, array[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  printf(&quot;\n&quot;);</span><br><span class="line"></span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void ssort(int array[], int size)</span><br><span class="line">&#123;</span><br><span class="line">  int i, j, hit;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; size; i++) &#123;</span><br><span class="line"></span><br><span class="line">    hit = i;</span><br><span class="line">    for (j = i; j &lt; size; j++) &#123;</span><br><span class="line">      if (array[j] &lt; array[hit]) &#123;</span><br><span class="line">        hit = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (i != hit) &#123;</span><br><span class="line">      int swap;</span><br><span class="line"></span><br><span class="line">      swap = array[i];</span><br><span class="line">      array[i] = array[hit];</span><br><span class="line">      array[hit] = swap;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  dump_array(array, asize, &quot;Before sort&quot;);</span><br><span class="line"></span><br><span class="line">  ssort(array, asize);</span><br><span class="line"></span><br><span class="line">  dump_array(array, asize, &quot; After sort&quot;);</span><br><span class="line"></span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="O-n-1"><a href="#O-n-1" class="headerlink" title="O(n!)"></a>O(n!)</h3><ul>
<li>factorial time<br><img src="/leptons-bosons/.io//n!.png" alt="factorial time"></li>
</ul>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a target="_blank" rel="noopener" href="https://algs4.cs.princeton.edu/home/">Algorithms, 4th Edition</a><br>Grokking Algorithms: An illustrated guide for programmers and other curious people</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/08/04/Big-O/" data-id="ckrrxh5dd00009svlax837ovi" data-title="Big-O Notation" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/algorithm/" rel="tag">algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/binary-search/" rel="tag">binary search</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/selection-sort/" rel="tag">selection sort</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/simple-search/" rel="tag">simple search</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-why-25g-nic" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/08/03/why-25g-nic/" class="article-date">
  <time class="dt-published" datetime="2018-08-03T14:27:47.000Z" itemprop="datePublished">2018-08-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/original/">original</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/08/03/why-25g-nic/">Why 25G Nic</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Backgroud"><a href="#Backgroud" class="headerlink" title="Backgroud"></a>Backgroud</h3><p>Choose 25g nic or 40g nic in server?</p>
<h3 id="About-PCIe-full-duplex-communication"><a href="#About-PCIe-full-duplex-communication" class="headerlink" title="About PCIe, full-duplex communication"></a>About PCIe, full-duplex communication</h3><ul>
<li><p>Lanes and Links<br><img src="/leptons-bosons/.io//pcie-lanes-and-links-.jpg" alt="Lanes and Links"></p>
</li>
<li><p>PCI Express link performance, each direction<br><img src="/leptons-bosons/.io//PCI-Express-link-performance-.jpg" alt="PCI Express link performance, each direction"></p>
</li>
</ul>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>For PCIe 3.0x8, 25G dual-ports NIC is better for PCIe bandwidth efficient.</p>
<h3 id="Append"><a href="#Append" class="headerlink" title="Append"></a>Append</h3><ul>
<li>PCIe Standard: <a target="_blank" rel="noopener" href="https://pcisig.com/">PCI-SIG</a></li>
<li>PCIe Roadmap<br><img src="/leptons-bosons/.io//pcie-roadmap.png" alt="PCIe Roadmap"></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/08/03/why-25g-nic/" data-id="ckrrxh5gl006h9svl0lg2droe" data-title="Why 25G Nic" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/hardware/" rel="tag">hardware</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/nic/" rel="tag">nic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/pcie/" rel="tag">pcie</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-flow-acceleration" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/06/30/flow-acceleration/" class="article-date">
  <time class="dt-published" datetime="2018-06-30T15:49:44.000Z" itemprop="datePublished">2018-06-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/original/">original</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/06/30/flow-acceleration/">Flow Acceleration</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>DPDK 17.02’s rte_flow, the framework of hardware acceleration.</p>
<ul>
<li>flowtable-hwaccel-flowchart<br><img src="/leptons-bosons/.io//flowtable-hwaccel-flowchart.png" alt="flowtable-hwaccel-flowchart"></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.napatech.com/">napatech’s</a> illustration:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.napatech.com/hw-acceleration-via-rte_flow/">Acceleration in HW is Boosting Performance. In DPDK 17.02 rte_Flow is the Enabler</a></li>
<li><a target="_blank" rel="noopener" href="https://www.napatech.com/acl-hw-acceleration-vpp/">ACL HW acceleration in VPP shows great performance improvements</a></li>
</ul>
<p>DPDK’s flow acceleration framework</p>
<ul>
<li><p>flow attribute, item and action, see <a target="_blank" rel="noopener" href="http://git.dpdk.org/dpdk/tree/lib/librte_ethdev/rte_flow.h">rte_flow.h</a></p>
<ul>
<li>Pattern items fall in two categories:<ul>
<li>Matching protocol headers and packet data, usually associated with a specification structure. These must be stacked in the same order as the protocol layers to match inside packets, starting from the lowest.</li>
<li>Matching meta-data or affecting pattern processing, often without a specification structure. Since they do not match packet contents, their position in the list is usually not relevant.</li>
</ul>
</li>
<li>Supported actions, they fall in three categories:<ul>
<li>Actions that modify the fate of matching traffic, for instance by dropping or assigning it a specific destination.</li>
<li>Actions that modify matching traffic contents or its properties. This includes adding/removing encapsulation, encryption, compression and marks.</li>
<li>Actions related to the flow rule itself, such as updating counters or making it non-terminating.</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="http://git.dpdk.org/dpdk/tree/lib/librte_ethdev/rte_ethdev_core.h#n360">eth_filter_ctrl_t</a>, e.g. <a target="_blank" rel="noopener" href="http://git.dpdk.org/dpdk/tree/drivers/net/ixgbe/ixgbe_ethdev.c#n6734">ixgbe_dev_filter_ctrl</a>, <a target="_blank" rel="noopener" href="http://git.dpdk.org/dpdk/tree/drivers/net/i40e/i40e_ethdev.c#n9862">i40e_dev_filter_ctrl</a></li>
</ul>
</li>
<li><p>example of flow aaceleartion, <a target="_blank" rel="noopener" href="http://git.dpdk.org/dpdk/tree/examples/flow_filtering/flow_blocks.c">generate_ipv4_flow</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">initialize of struct rte_flow_attr</span><br><span class="line">	--&gt; struct rte_flow_item</span><br><span class="line">		--&gt; struct rte_flow_action</span><br><span class="line">			--&gt; rte_flow_create()</span><br><span class="line">				--&gt; eth_filter_ctrl_t, e.g. ixgbe_dev_filter_ctrl</span><br><span class="line">					--&gt; struct rte_flow_ops&#x27;s create, e.g. ixgbe_flow_create</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/06/30/flow-acceleration/" data-id="ckrrxh5e5000m9svl8uzje5af" data-title="Flow Acceleration" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/acceleration/" rel="tag">acceleration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/flow-offload/" rel="tag">flow offload</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/network/" rel="tag">network</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-netlink" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/leptons-bosons/2018/04/19/netlink/" class="article-date">
  <time class="dt-published" datetime="2018-04-19T13:27:59.000Z" itemprop="datePublished">2018-04-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/leptons-bosons/categories/original/">original</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/leptons-bosons/2018/04/19/netlink/">Generic Netlink used in OvS</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>The netlink protocol is a socket-based Inter Process Communication (IPC) mechanism, based on <a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc3549.txt">RFC 3549</a>, “Linux Netlink as an IP Services Protocol.” It provides a bidirectional communication channel between userspace and the kernel or among some parts of the kernel itself.</p>
<p>Appeared first in the 2.2 Linux kernel, an alternative to the awkward IOCTL communication method, but more flexiblity. The IOCTL handlers cannot send asynchronous messages to userspace from the kernel, and you have to define IOCTL numbers.</p>
<h3 id="Netlink-API-and-Structure-in-userspace"><a href="#Netlink-API-and-Structure-in-userspace" class="headerlink" title="Netlink API and Structure in userspace"></a>Netlink API and Structure in userspace</h3><h4 id="create-netlink-socket"><a href="#create-netlink-socket" class="headerlink" title="create netlink socket"></a>create netlink socket</h4><p>socket(AF_NETLINK, SOCK_RAW, NETLINK_GENERIC)</p>
<h4 id="set-netlink-sock-options"><a href="#set-netlink-sock-options" class="headerlink" title="set netlink sock options"></a>set netlink sock options</h4><p>setsockopt(int fd, SOL_SOCKET, SO_RCVBUFFORCE, const void *optval, socklen_t optlen)</p>
<h4 id="connect-a-netlink-sock"><a href="#connect-a-netlink-sock" class="headerlink" title="connect a netlink sock"></a>connect a netlink sock</h4><p>connect(int fd, struct sockaddr *, int len)</p>
<h4 id="get-created-generic-netlink-sock’s-id"><a href="#get-created-generic-netlink-sock’s-id" class="headerlink" title="get created generic netlink sock’s id"></a>get created generic netlink sock’s id</h4><p>Send CTRL_CMD_GETFAMILY cmd to generic netlink id GENL_ID_CTRL with <strong>sendmsg()</strong>.</p>
<h4 id="generic-netlink-sock’s-id-in-OvS"><a href="#generic-netlink-sock’s-id-in-OvS" class="headerlink" title="generic netlink sock’s id in OvS"></a>generic netlink sock’s id in OvS</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">static int ovs_datapath_family;</span><br><span class="line">static int ovs_vport_family;</span><br><span class="line">static int ovs_flow_family;</span><br><span class="line">static int ovs_packet_family;</span><br></pre></td></tr></table></figure>
<p>Corresponding with “generic netlink operations in OvS”.</p>
<p><strong>With a word, the operations of netlink sock in userspace just as the unix or network socket’s operations, such a friendly design.</strong></p>
<h3 id="Netlink-Interface-and-Structure-in-Kernel"><a href="#Netlink-Interface-and-Structure-in-Kernel" class="headerlink" title="Netlink Interface and Structure in Kernel"></a>Netlink Interface and Structure in Kernel</h3><h4 id="create-netlink-sock"><a href="#create-netlink-sock" class="headerlink" title="create netlink sock"></a>create netlink sock</h4><p>netlink_kernel_create(struct net *net, int unit, struct netlink_kernel_cfg *cfg)</p>
<h4 id="generic-netlink-init"><a href="#generic-netlink-init" class="headerlink" title="generic netlink init"></a>generic netlink init</h4><p>genl_pernet_init()</p>
<h4 id="generic-netlink-input-callback"><a href="#generic-netlink-input-callback" class="headerlink" title="generic netlink input callback"></a>generic netlink input callback</h4><p>(*input)(struct sk_buff *skb)<br>genl_rcv–&gt;genl_rcv_msg</p>
<h4 id="generic-netlink-sendmsg-to-userspace"><a href="#generic-netlink-sendmsg-to-userspace" class="headerlink" title="generic netlink sendmsg to userspace"></a>generic netlink sendmsg to userspace</h4><p>genlmsg_put()<br>genlmsg_unicast() /* mostly used */<br>genlmsg_multicast()</p>
<h4 id="generic-netlink-operations"><a href="#generic-netlink-operations" class="headerlink" title="generic netlink operations"></a>generic netlink operations</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * struct genl_ops - generic netlink operations</span><br><span class="line"> * @cmd: command identifier</span><br><span class="line"> * @internal_flags: flags used by the family</span><br><span class="line"> * @flags: flags</span><br><span class="line"> * @policy: attribute validation policy</span><br><span class="line"> * @doit: standard command callback</span><br><span class="line"> * @dumpit: callback for dumpers</span><br><span class="line"> * @done: completion callback for dumps</span><br><span class="line"> * @ops_list: operations list</span><br><span class="line"> */</span><br><span class="line">struct genl_ops &#123;</span><br><span class="line">	const struct nla_policy	*policy;</span><br><span class="line">	int		       (*doit)(struct sk_buff *skb,</span><br><span class="line">				       struct genl_info *info);</span><br><span class="line">	int		       (*dumpit)(struct sk_buff *skb,</span><br><span class="line">					 struct netlink_callback *cb);</span><br><span class="line">	int		       (*done)(struct netlink_callback *cb);</span><br><span class="line">	u8			cmd;</span><br><span class="line">	u8			internal_flags;</span><br><span class="line">	u8			flags;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * struct nla_policy - attribute validation policy</span><br><span class="line"> * @type: Type of attribute or NLA_UNSPEC</span><br><span class="line"> * @len: Type specific length of payload</span><br><span class="line"> *</span><br><span class="line"> * Policies are defined as arrays of this struct, the array must be</span><br><span class="line"> * accessible by attribute type up to the highest identifier to be expected.</span><br><span class="line"> *</span><br><span class="line"> * Meaning of &#x27;len&#x27; field:</span><br><span class="line"> *    NLA_STRING           Maximum length of string</span><br><span class="line"> *    NLA_NUL_STRING       Maximum length of string (excluding NUL)</span><br><span class="line"> *    NLA_FLAG             Unused</span><br><span class="line"> *    NLA_BINARY           Maximum length of attribute payload</span><br><span class="line"> *    NLA_NESTED           Don&#x27;t use &#x27;len&#x27; field -- length verification is</span><br><span class="line"> *                         done by checking len of nested header (or empty)</span><br><span class="line"> *    NLA_NESTED_COMPAT    Minimum length of structure payload</span><br><span class="line"> *    NLA_U8, NLA_U16,</span><br><span class="line"> *    NLA_U32, NLA_U64,</span><br><span class="line"> *    NLA_S8, NLA_S16,</span><br><span class="line"> *    NLA_S32, NLA_S64,</span><br><span class="line"> *    NLA_MSECS            Leaving the length field zero will verify the</span><br><span class="line"> *                         given type fits, using it verifies minimum length</span><br><span class="line"> *                         just like &quot;All other&quot;</span><br><span class="line"> *    All other            Minimum length of attribute payload</span><br><span class="line"> *</span><br><span class="line"> * Example:</span><br><span class="line"> * static const struct nla_policy my_policy[ATTR_MAX+1] = &#123;</span><br><span class="line"> * 	[ATTR_FOO] = &#123; .type = NLA_U16 &#125;,</span><br><span class="line"> *	[ATTR_BAR] = &#123; .type = NLA_STRING, .len = BARSIZ &#125;,</span><br><span class="line"> *	[ATTR_BAZ] = &#123; .len = sizeof(struct mystruct) &#125;,</span><br><span class="line"> * &#125;;</span><br><span class="line"> */</span><br><span class="line">struct nla_policy &#123;</span><br><span class="line">	u16		type;</span><br><span class="line">	u16		len;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="generic-netlink-operations-in-OvS"><a href="#generic-netlink-operations-in-OvS" class="headerlink" title="generic netlink operations in OvS"></a>generic netlink operations in OvS</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/* datapath operatons, new, del, dump and set */</span><br><span class="line">struct genl_ops dp_datapath_genl_ops;</span><br><span class="line"></span><br><span class="line">/* port operations, new, del, dump and set */</span><br><span class="line">struct genl_ops dp_vport_genl_ops;</span><br><span class="line"></span><br><span class="line">/* exact flow operations */</span><br><span class="line">struct genl_ops dp_flow_genl_ops;</span><br><span class="line"></span><br><span class="line">/* upcall packets handler */</span><br><span class="line">struct genl_ops dp_packet_genl_ops;</span><br></pre></td></tr></table></figure>

<p>One-to-one correspondence with netlink sock’s id.</p>
<h3 id="Netlink-message-layout"><a href="#Netlink-message-layout" class="headerlink" title="Netlink message layout"></a>Netlink message layout</h3><h4 id="layout-illustrate"><a href="#layout-illustrate" class="headerlink" title="layout illustrate"></a>layout illustrate</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> *  &lt;------- NLA_HDRLEN ------&gt; &lt;-- NLA_ALIGN(payload)--&gt;</span><br><span class="line"> * +---------------------+- - -+- - - - - - - - - -+- - -+</span><br><span class="line"> * |        Header       | Pad |     Payload       | Pad |</span><br><span class="line"> * |   (struct nlattr)   | ing |                   | ing |</span><br><span class="line"> * +---------------------+- - -+- - - - - - - - - -+- - -+</span><br><span class="line"> *  &lt;-------------- nlattr-&gt;nla_len --------------&gt;</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
<h3 id="Summary-with-flow-chart"><a href="#Summary-with-flow-chart" class="headerlink" title="Summary with flow chart"></a>Summary with flow chart</h3><ul>
<li>generic netlink flow chart in OvS<br><img src="/leptons-bosons/.io//netlink-flow.jpg" alt="generic netlink flow chart in OvS"></li>
</ul>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a target="_blank" rel="noopener" href="https://wiki.linuxfoundation.org/networking/generic_netlink_howto">generic netlink howto</a></p>
<h3 id="Append-generic-netlink-example-code"><a href="#Append-generic-netlink-example-code" class="headerlink" title="Append: generic netlink example code"></a>Append: generic netlink example code</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── kernel</span><br><span class="line">│   └── netlink_instance.c</span><br><span class="line">├── Makefile</span><br><span class="line">├── pub</span><br><span class="line">│   └── genl_ins_pub.h</span><br><span class="line">└── user</span><br><span class="line">    └── user_netlink.c</span><br></pre></td></tr></table></figure>

<h4 id="kernel-netlink-instance-c"><a href="#kernel-netlink-instance-c" class="headerlink" title="kernel/netlink_instance.c"></a>kernel/netlink_instance.c</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;linux/kernel.h&gt;</span><br><span class="line">#include &lt;linux/module.h&gt;</span><br><span class="line">#include &lt;net/genetlink.h&gt;</span><br><span class="line"></span><br><span class="line">#include &quot;../pub/genl_ins_pub.h&quot;</span><br><span class="line"></span><br><span class="line">/* attribute policy */</span><br><span class="line">static struct nla_policy instance_genl_policy[INSTANCE_A_MAX + 1] = &#123;</span><br><span class="line">   [INSTANCE_A_MSG] = &#123; .type = NLA_NUL_STRING &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/* handler */</span><br><span class="line">int instance_echo(struct sk_buff *skb, struct genl_info *info);</span><br><span class="line"></span><br><span class="line">/* operation definition */</span><br><span class="line">static struct genl_ops instance_genl_ops[INSTANCE_C_MAX] = &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        .cmd = INSTANCE_C_ECHO,</span><br><span class="line">        .flags = 0,</span><br><span class="line">        .policy = instance_genl_policy,</span><br><span class="line">        .doit = instance_echo,</span><br><span class="line">        .dumpit = NULL,</span><br><span class="line">   &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/* family definition */</span><br><span class="line">static struct genl_family instance_genl_family = &#123;</span><br><span class="line">   .id = GENL_ID_GENERATE,</span><br><span class="line">   .hdrsize = 0,</span><br><span class="line">   .name = GENL_INSTANCE_NAME,</span><br><span class="line">   .version = 1,</span><br><span class="line">   .maxattr = INSTANCE_A_MAX,</span><br><span class="line">   .netnsok = true,</span><br><span class="line">   .parallel_ops = true,</span><br><span class="line">   .ops = instance_genl_ops,</span><br><span class="line">   .n_ops = ARRAY_SIZE(instance_genl_ops),</span><br><span class="line">   .module = THIS_MODULE,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int instance_echo(struct sk_buff *skb, struct genl_info *info)</span><br><span class="line">&#123;</span><br><span class="line">    struct nlattr *na;</span><br><span class="line">    struct sk_buff *skb_echo = NULL;</span><br><span class="line">    int rc;</span><br><span class="line">    void *msg_head;</span><br><span class="line">    char *mydata;</span><br><span class="line"> </span><br><span class="line">    if (info == NULL) &#123;</span><br><span class="line">        goto out;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    /* For each attribute there is an index in info-&gt;attrs</span><br><span class="line">     * which points to a nlattr structure in this structure</span><br><span class="line">     * the data is given</span><br><span class="line">     */</span><br><span class="line">    na = info-&gt;attrs[INSTANCE_A_MSG];</span><br><span class="line">    if (na) &#123;</span><br><span class="line">        mydata = (char *) nla_data(na);</span><br><span class="line">        if (mydata == NULL) &#123;</span><br><span class="line">            printk(KERN_ERR &quot;error while receiving data\n&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            /* shuld be validate the contend of data before print */</span><br><span class="line">            printk(KERN_INFO &quot;received: %s\n&quot;, mydata);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        printk(KERN_INFO &quot;no info-&gt;attrs %i\n&quot;, INSTANCE_A_MSG);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* Send a message back */</span><br><span class="line">    /* Allocate some memory, since the size is not</span><br><span class="line">     * yet known use NLMSG_GOODSIZE</span><br><span class="line">     */</span><br><span class="line">    skb_echo = genlmsg_new(NLMSG_GOODSIZE, GFP_KERNEL);</span><br><span class="line">    if (skb_echo == NULL) &#123;</span><br><span class="line">        goto out;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* Create the message headers */</span><br><span class="line">    /* arguments of genlmsg_put: </span><br><span class="line">     * struct sk_buff *, </span><br><span class="line">     * int (sending) pid, </span><br><span class="line">     * int sequence number, </span><br><span class="line">     * struct genl_family *, </span><br><span class="line">     * int flags, </span><br><span class="line">     * u8 command index (why do we need this?)</span><br><span class="line">     */</span><br><span class="line">    msg_head = genlmsg_put(skb_echo, 0, info-&gt;snd_seq + 1,</span><br><span class="line">                           &amp;instance_genl_family, 0, INSTANCE_C_ECHO);</span><br><span class="line">    if (msg_head == NULL) &#123;</span><br><span class="line">        rc = -ENOMEM;</span><br><span class="line">        goto out;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* Add a INSTANCE_A_MSG attribute (actual value to be sent) */</span><br><span class="line">    rc = nla_put_string(skb_echo, INSTANCE_A_MSG,</span><br><span class="line">                        &quot;Hello world from kernel space&quot;);</span><br><span class="line">    if (rc != 0) &#123;</span><br><span class="line">        goto out;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    /* Finalize the message */</span><br><span class="line">    genlmsg_end(skb_echo, msg_head);</span><br><span class="line"></span><br><span class="line">    /* Send the message back */</span><br><span class="line">    rc = genlmsg_unicast(genl_info_net(info), skb_echo, info-&gt;snd_portid);</span><br><span class="line">    if (rc != 0) &#123;</span><br><span class="line">        goto out;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line"></span><br><span class="line">out:</span><br><span class="line">    if (!skb_echo) &#123;</span><br><span class="line">        kfree_skb(skb_echo);</span><br><span class="line">    &#125;</span><br><span class="line">    printk(KERN_ERR &quot;an error occured in instance_echo\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int __init genl_instance_init(void)</span><br><span class="line">&#123;</span><br><span class="line">    int rc;</span><br><span class="line"></span><br><span class="line">    rc = genl_register_family(&amp;instance_genl_family);</span><br><span class="line">    if (rc != 0) &#123;</span><br><span class="line">        printk(KERN_ERR &quot;register instance genl family fail, err %d\n&quot;, rc);</span><br><span class="line">        return rc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    printk(KERN_INFO &quot;register %s genl family success\n&quot;, GENL_INSTANCE_NAME);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void genl_instance_uninit(void)</span><br><span class="line">&#123;</span><br><span class="line">    genl_unregister_family(&amp;instance_genl_family);</span><br><span class="line"></span><br><span class="line">    printk(KERN_INFO &quot;unregister %s genl family success\n&quot;, GENL_INSTANCE_NAME);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module_init(genl_instance_init);</span><br><span class="line">module_exit(genl_instance_uninit);</span><br><span class="line"></span><br><span class="line">MODULE_DESCRIPTION(&quot;generic netlink instance&quot;);</span><br><span class="line">MODULE_LICENSE(&quot;GPL&quot;);</span><br><span class="line">MODULE_VERSION(&quot;0.1&quot;);</span><br><span class="line">MODULE_ALIAS_GENL_FAMILY(GENL_INSTANCE_NAME);</span><br></pre></td></tr></table></figure>

<h4 id="user-user-netlink-c"><a href="#user-user-netlink-c" class="headerlink" title="user/user_netlink.c"></a>user/user_netlink.c</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdint.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;errno.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;poll.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;sys/types.h&gt;</span><br><span class="line">#include &lt;sys/stat.h&gt;</span><br><span class="line">#include &lt;sys/socket.h&gt;</span><br><span class="line">#include &lt;sys/types.h&gt;</span><br><span class="line">#include &lt;signal.h&gt;</span><br><span class="line"></span><br><span class="line">#include &lt;linux/genetlink.h&gt;</span><br><span class="line"></span><br><span class="line">#include &quot;../pub/genl_ins_pub.h&quot;</span><br><span class="line"></span><br><span class="line">/* Generic macros for dealing with netlink sockets. Might be duplicated</span><br><span class="line"> * elsewhere. It is recommended that commercial grade applications use</span><br><span class="line"> * libnl or libnetlink and use the interfaces provided by the library</span><br><span class="line"> */</span><br><span class="line">#define GENLMSG_DATA(gh) ((void *)(NLMSG_DATA(gh) + GENL_HDRLEN))</span><br><span class="line">#define GENLMSG_PAYLOAD(gh) (NLMSG_PAYLOAD(gh, 0) - GENL_HDRLEN)</span><br><span class="line">#define NLA_DATA(na) ((void *)((char*)(na) + NLA_HDRLEN))</span><br><span class="line"></span><br><span class="line">#define MESSAGE_TO_KERNEL &quot;Hello World!&quot;</span><br><span class="line"></span><br><span class="line">struct nl_sock</span><br><span class="line">&#123;</span><br><span class="line">    int fd;</span><br><span class="line">    uint32_t pid;</span><br><span class="line">    </span><br><span class="line">    int protocol;</span><br><span class="line">    uint32_t seq_id;</span><br><span class="line"></span><br><span class="line">    int family_id;</span><br><span class="line">    const char *name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/* memory for netlink request and response messages</span><br><span class="line"> * - headers are included</span><br><span class="line"> */</span><br><span class="line">struct gennl_ins_msg &#123;</span><br><span class="line">    struct nlmsghdr nh;</span><br><span class="line">    struct genlmsghdr gh;</span><br><span class="line">    char user[256];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">static struct nl_sock instance = &#123; .fd = -1,</span><br><span class="line">                                   .name = GENL_INSTANCE_NAME &#125;;</span><br><span class="line"></span><br><span class="line">int create_nl_sock(struct nl_sock *nl_sock, int protocol);</span><br><span class="line">int lookup_gennl_family_id(struct nl_sock *nl_sock);</span><br><span class="line">int gennl_interaction(struct nl_sock *nl_sock);</span><br><span class="line"></span><br><span class="line">int main(char **argv, int argc)</span><br><span class="line">&#123;</span><br><span class="line">    do &#123;</span><br><span class="line">        if (create_nl_sock(&amp;instance, NETLINK_GENERIC) &lt; 0) &#123;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (gennl_interaction(&amp;instance)) &#123;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; while (0);</span><br><span class="line"></span><br><span class="line">    if (instance.fd &gt; 0) &#123;</span><br><span class="line">        close(instance.fd);</span><br><span class="line">        instance.fd = -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int create_nl_sock(struct nl_sock *nl_sock, int protocol)</span><br><span class="line">&#123;</span><br><span class="line">    int retval, rcvbuf = 1024 * 1024;</span><br><span class="line">    struct sockaddr_nl local, remote;</span><br><span class="line"></span><br><span class="line">    nl_sock-&gt;fd = socket(AF_NETLINK, SOCK_RAW, protocol);</span><br><span class="line">    if (nl_sock-&gt;fd &lt; 0) &#123;</span><br><span class="line">        fprintf(stderr, &quot;create socket errno: %d\n&quot;, errno);</span><br><span class="line">        return errno;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    nl_sock-&gt;protocol = protocol;</span><br><span class="line">    nl_sock-&gt;seq_id = 1;</span><br><span class="line">    </span><br><span class="line">    if (setsockopt(nl_sock-&gt;fd, SOL_SOCKET, SO_RCVBUFFORCE,</span><br><span class="line">                   &amp;rcvbuf, sizeof rcvbuf)) &#123;</span><br><span class="line">        printf(&quot;setting %d-bytes socket receive buffer failed, errno %d\n&quot;,</span><br><span class="line">               rcvbuf, errno);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* Connect to kernel (pid 0) as remote address. */</span><br><span class="line">    memset(&amp;remote, 0, sizeof remote);</span><br><span class="line">    remote.nl_family = AF_NETLINK;</span><br><span class="line">    remote.nl_pid = 0;</span><br><span class="line"></span><br><span class="line">    if (connect(nl_sock-&gt;fd, (struct sockaddr *) &amp;remote,</span><br><span class="line">                sizeof(remote)) &lt; 0) &#123;</span><br><span class="line">        retval = errno;</span><br><span class="line">        fprintf(stderr, &quot;connect sock fail, errno %d\n&quot;, errno);</span><br><span class="line"></span><br><span class="line">        goto error;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (lookup_gennl_family_id(nl_sock)) &#123;</span><br><span class="line">        retval = -1;</span><br><span class="line">        goto error;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line"></span><br><span class="line">error:</span><br><span class="line">    if (nl_sock-&gt;fd &gt;= 0) &#123;</span><br><span class="line">        close(nl_sock-&gt;fd);</span><br><span class="line">        nl_sock-&gt;fd = -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return retval;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int lookup_gennl_family_id(struct nl_sock *nl_sock)</span><br><span class="line">&#123;</span><br><span class="line">    struct gennl_ins_msg request, reply;</span><br><span class="line">    struct nlattr *nl_na;</span><br><span class="line">    struct sockaddr_nl nl_address;</span><br><span class="line">    int length;</span><br><span class="line"></span><br><span class="line">    /* Step 1. prepare request msg */</span><br><span class="line">    /* netlink header */</span><br><span class="line">    request.nh.nlmsg_type = GENL_ID_CTRL;</span><br><span class="line">    request.nh.nlmsg_flags = NLM_F_REQUEST;</span><br><span class="line">    request.nh.nlmsg_seq = nl_sock-&gt;seq_id;</span><br><span class="line">    request.nh.nlmsg_pid = getpid();</span><br><span class="line">    request.nh.nlmsg_len = NLMSG_LENGTH(GENL_HDRLEN);</span><br><span class="line"></span><br><span class="line">    /* generic netlink header */</span><br><span class="line">    request.gh.cmd = CTRL_CMD_GETFAMILY;</span><br><span class="line">    request.gh.version = 0x2;</span><br><span class="line"></span><br><span class="line">    /* assemble attr */</span><br><span class="line">    nl_na = (struct nlattr *) GENLMSG_DATA(&amp;request);</span><br><span class="line">    nl_na-&gt;nla_type = CTRL_ATTR_FAMILY_NAME;</span><br><span class="line">    nl_na-&gt;nla_len = strlen(GENL_INSTANCE_NAME) + 1 + NLA_HDRLEN;</span><br><span class="line">    strcpy(NLA_DATA(nl_na), GENL_INSTANCE_NAME);</span><br><span class="line"></span><br><span class="line">    request.nh.nlmsg_len += NLMSG_ALIGN(nl_na-&gt;nla_len);</span><br><span class="line"></span><br><span class="line">    /* Step 2. send request msg */</span><br><span class="line">    memset(&amp;nl_address, 0, sizeof(nl_address));</span><br><span class="line">    nl_address.nl_family = AF_NETLINK;</span><br><span class="line"></span><br><span class="line">    length = sendto(nl_sock-&gt;fd, (char *) &amp;request, request.nh.nlmsg_len,</span><br><span class="line">                    0, (struct sockaddr *) &amp;nl_address, sizeof(nl_address));</span><br><span class="line">    if (length != request.nh.nlmsg_len) &#123;</span><br><span class="line">        fprintf(stderr, &quot;%s sendto fail, %d\n&quot;, __func__, length);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* Step 3. receive reply msg */</span><br><span class="line">    length = recv(nl_sock-&gt;fd, &amp;reply, sizeof(reply), 0);</span><br><span class="line">    if (length &lt; 0) &#123;</span><br><span class="line">        fprintf(stderr, &quot;%s recv fail, %d\n&quot;, __func__, length);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* Step 4. validate&amp;parse reply msg */</span><br><span class="line">    if (!NLMSG_OK((&amp;reply.nh), length)) &#123;</span><br><span class="line">        fprintf(stderr, &quot;family ID request: invalid message\n&quot;);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">    if (reply.nh.nlmsg_type == NLMSG_ERROR) &#123;</span><br><span class="line">        fprintf(stderr, &quot;family ID request: receive error\n&quot;);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    nl_na = (struct nlattr *) GENLMSG_DATA(&amp;reply);</span><br><span class="line">    nl_na = (struct nlattr *) ((char *) nl_na + NLA_ALIGN(nl_na-&gt;nla_len));</span><br><span class="line">    if (nl_na-&gt;nla_type != CTRL_ATTR_FAMILY_ID) &#123;</span><br><span class="line">        fprintf(stderr, &quot;family ID request: receive nla type(%d) not match %d\n&quot;,</span><br><span class="line">                nl_na-&gt;nla_type, CTRL_ATTR_FAMILY_ID);</span><br><span class="line">        return -1;    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    nl_sock-&gt;family_id = *(__u16 *) NLA_DATA(nl_na);</span><br><span class="line">    printf(&quot;%s genric netlink id %d\n&quot;,</span><br><span class="line">           GENL_INSTANCE_NAME, nl_sock-&gt;family_id);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int gennl_interaction(struct nl_sock *nl_sock)</span><br><span class="line">&#123;</span><br><span class="line">    struct gennl_ins_msg request, reply;</span><br><span class="line">    struct nlattr *nl_na;</span><br><span class="line">    struct sockaddr_nl nl_address;</span><br><span class="line">    int length;</span><br><span class="line"></span><br><span class="line">    memset(&amp;request, 0, sizeof(request));</span><br><span class="line">    memset(&amp;reply, 0, sizeof(reply));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    request.nh.nlmsg_len = NLMSG_LENGTH(GENL_HDRLEN);</span><br><span class="line">    request.nh.nlmsg_type = nl_sock-&gt;family_id;</span><br><span class="line">    request.nh.nlmsg_flags = NLM_F_REQUEST;</span><br><span class="line">    request.nh.nlmsg_seq = 60;</span><br><span class="line">    request.nh.nlmsg_pid = getpid();</span><br><span class="line"></span><br><span class="line">    request.gh.cmd = INSTANCE_C_ECHO;</span><br><span class="line">    nl_na = (struct nlattr *) GENLMSG_DATA(&amp;request);</span><br><span class="line">    nl_na-&gt;nla_type = INSTANCE_A_MSG;</span><br><span class="line">    nl_na-&gt;nla_len = sizeof(MESSAGE_TO_KERNEL) + NLA_HDRLEN;</span><br><span class="line">    memcpy(NLA_DATA(nl_na), MESSAGE_TO_KERNEL, sizeof(MESSAGE_TO_KERNEL));</span><br><span class="line"></span><br><span class="line">    request.nh.nlmsg_len += NLMSG_ALIGN(nl_na-&gt;nla_len);</span><br><span class="line"></span><br><span class="line">    memset(&amp;nl_address, 0, sizeof(nl_address));</span><br><span class="line">    nl_address.nl_family = AF_NETLINK;</span><br><span class="line"></span><br><span class="line">    length = sendto(nl_sock-&gt;fd, (char *) &amp;request, request.nh.nlmsg_len,</span><br><span class="line">                    0, (struct sockaddr *) &amp;nl_address, sizeof(nl_address));</span><br><span class="line">    if (length != request.nh.nlmsg_len) &#123;</span><br><span class="line">        fprintf(stderr, &quot;%s sento return %d, expect %d\n&quot;, __func__,</span><br><span class="line">                length, request.nh.nlmsg_len);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    length = recv(nl_sock-&gt;fd, &amp;reply, sizeof(reply), 0);</span><br><span class="line">    if (length &lt; 0) &#123;</span><br><span class="line">        printf(&quot;%s recv error %d\n&quot;, __func__, length);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (!NLMSG_OK((&amp;reply.nh), length)) &#123;</span><br><span class="line">        fprintf(stderr, &quot;%s recv invalid nlmsg\n&quot;, __func__);</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    length = GENLMSG_PAYLOAD(&amp;reply.nh);</span><br><span class="line">    nl_na = (struct nlattr *) GENLMSG_DATA(&amp;reply);</span><br><span class="line">    printf(&quot;kernel replied: %s\n&quot;,(char *)NLA_DATA(nl_na));</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="pub-genl-ins-pub-h"><a href="#pub-genl-ins-pub-h" class="headerlink" title="pub/genl_ins_pub.h"></a>pub/genl_ins_pub.h</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#define GENL_INSTANCE_NAME &quot;gennl_ins&quot;</span><br><span class="line"></span><br><span class="line">#ifndef ARRAY_SIZE</span><br><span class="line">#define ARRAY_SIZE(_x)  ((sizeof(_x))/sizeof (_x)[0])</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">/* commands */</span><br><span class="line">enum &#123;</span><br><span class="line">   INSTANCE_C_UNSPEC,</span><br><span class="line">   INSTANCE_C_ECHO,</span><br><span class="line">   __INSTANCE_C_MAX,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">#define INSTANCE_C_MAX (__INSTANCE_C_MAX - 1)</span><br><span class="line"></span><br><span class="line">/* attributes */</span><br><span class="line">enum &#123;</span><br><span class="line">   INSTANCE_A_UNSPEC,</span><br><span class="line">   INSTANCE_A_MSG,</span><br><span class="line">   __INSTANCE_A_MAX,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">#define INSTANCE_A_MAX (__INSTANCE_A_MAX - 1)</span><br></pre></td></tr></table></figure>

<h4 id="Makefile"><a href="#Makefile" class="headerlink" title="Makefile"></a>Makefile</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"># Example run in CentOS 7.4 with kernel 3.10.0-693.el7.x86_64</span><br><span class="line"># Tabs maybe transfer to space, this should be check or correct after copy.</span><br><span class="line"></span><br><span class="line">CONFIG_MODULE_SIG=n</span><br><span class="line">obj-m += kernel/netlink_instance.o</span><br><span class="line">nl_kern-objs := kernel/netlink_instance.o</span><br><span class="line"></span><br><span class="line">all: kernel-build kernel-clean-temporary user-build</span><br><span class="line">	@tput setaf 3</span><br><span class="line">	@echo &quot;    done: all&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line">clean: kernel-clean user-clean</span><br><span class="line">	@tput setaf 3</span><br><span class="line">	@echo &quot;    done: clean&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kernel-build:</span><br><span class="line">	@tput setaf 1</span><br><span class="line">	@echo &quot;    kernel-build&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line">	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules</span><br><span class="line">kernel-clean:</span><br><span class="line">	@tput setaf 1</span><br><span class="line">	@echo &quot;    kernel-clean&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line">	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean</span><br><span class="line">kernel-clean-temporary:</span><br><span class="line">	@tput setaf 1</span><br><span class="line">	@echo &quot;    kernel-clean-temporary&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line">	-rm -rf *.o *~ core .depend .*.cmd *.mod.c .tmp_versions</span><br><span class="line">	-rm -rf kernel/*.o kernel/*~ kernel/core kernel/.depend kernel/.*.cmd  kernel/*.mod.c kernel/.tmp_versions</span><br><span class="line">	-rm -rf Module.symvers modules.order</span><br><span class="line">kernel-module-install:</span><br><span class="line">	@tput setaf 1</span><br><span class="line">	@echo &quot;    kernel-module-install&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line">	-sudo insmod netlink-instance.ko</span><br><span class="line">kernel-module-uninstall:</span><br><span class="line">	@tput setaf 1</span><br><span class="line">	@echo &quot;    kernel-module-uninstall&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line">	-sudo rmmod netlink-instance</span><br><span class="line">kernel-clean-ring-buffer:</span><br><span class="line">	@tput setaf 1</span><br><span class="line">	@echo &quot;    kernel-clean-ring-buffer&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line">	sudo dmesg -c &gt; /dev/null</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user-build:</span><br><span class="line">	@tput setaf 1</span><br><span class="line">	@echo &quot;    user-build&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line">	gcc user/user_netlink.c -o genl_user</span><br><span class="line">user-clean:</span><br><span class="line">	@tput setaf 1</span><br><span class="line">	@echo &quot;    user-clean&quot;</span><br><span class="line">	@tput sgr0</span><br><span class="line">	rm -rf *.out genl_user</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://username.github.io/leptons-bosons/2018/04/19/netlink/" data-id="ckrrxh5gq006l9svlbkka5wf6" data-title="Generic Netlink used in OvS" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/Open-vSwitch/" rel="tag">Open vSwitch</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/netlink/" rel="tag">netlink</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/leptons-bosons/tags/network/" rel="tag">network</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/leptons-bosons/page/2/">&laquo; Prev</a><a class="page-number" href="/leptons-bosons/">1</a><a class="page-number" href="/leptons-bosons/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/leptons-bosons/page/4/">4</a><a class="extend next" rel="next" href="/leptons-bosons/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/leptons-bosons/categories/algorithm/">algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/leptons-bosons/categories/original/">original</a></li><li class="category-list-item"><a class="category-list-link" href="/leptons-bosons/categories/quotes/">quotes</a></li><li class="category-list-item"><a class="category-list-link" href="/leptons-bosons/categories/reference/">reference</a></li><li class="category-list-item"><a class="category-list-link" href="/leptons-bosons/categories/virtualization/">virtualization</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/Driver/" rel="tag">Driver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/EDK2/" rel="tag">EDK2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/Infrastructure-Architecture/" rel="tag">Infrastructure Architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/KVM/" rel="tag">KVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/Open-vSwitch/" rel="tag">Open vSwitch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/OpenStack/" rel="tag">OpenStack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/Path-MTU/" rel="tag">Path MTU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/Qemu/" rel="tag">Qemu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/Raspberry-Pi/" rel="tag">Raspberry Pi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/aarch64/" rel="tag">aarch64</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/acceleration/" rel="tag">acceleration</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/algorithm/" rel="tag">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/analyst/" rel="tag">analyst</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/association/" rel="tag">association</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/aws-nitro/" rel="tag">aws nitro</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/binary-index-tree/" rel="tag">binary index tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/binary-search/" rel="tag">binary search</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/block-io/" rel="tag">block io</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/bookmark/" rel="tag">bookmark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/breadth-first-search/" rel="tag">breadth-first search</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/bridge/" rel="tag">bridge</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/calling-conventions/" rel="tag">calling conventions</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/conntrack/" rel="tag">conntrack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/demo/" rel="tag">demo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/design-patterns/" rel="tag">design patterns</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/dijkstra/" rel="tag">dijkstra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/dynamic-programing/" rel="tag">dynamic programing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/ethernet/" rel="tag">ethernet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/expert/" rel="tag">expert</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/fenwick-tree/" rel="tag">fenwick tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/fibre-channel/" rel="tag">fibre channel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/flow-offload/" rel="tag">flow offload</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/flow-table/" rel="tag">flow table</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/graph/" rel="tag">graph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/greedy/" rel="tag">greedy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/hardware/" rel="tag">hardware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/industry/" rel="tag">industry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/infiniband/" rel="tag">infiniband</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/interface/" rel="tag">interface</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/k-nearest-neighbors/" rel="tag">k-nearest-neighbors</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/kernel/" rel="tag">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/kvm/" rel="tag">kvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/memory-layout/" rel="tag">memory layout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/more-algorithms/" rel="tag">more algorithms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/netfilter/" rel="tag">netfilter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/netlink/" rel="tag">netlink</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/network/" rel="tag">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/nic/" rel="tag">nic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/ofprot-trace/" rel="tag">ofprot/trace</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/ovs-sandbox/" rel="tag">ovs-sandbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/paper/" rel="tag">paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/pcie/" rel="tag">pcie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/program/" rel="tag">program</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/protocol/" rel="tag">protocol</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/protocols/" rel="tag">protocols</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/qemu/" rel="tag">qemu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/quick-sort/" rel="tag">quick sort</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/segment-tree/" rel="tag">segment tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/selection-sort/" rel="tag">selection sort</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/shortest-path/" rel="tag">shortest path</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/simple-search/" rel="tag">simple search</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/storage/" rel="tag">storage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/tcp-syn/" rel="tag">tcp syn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/tcp-ip/" rel="tag">tcp/ip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/tool/" rel="tag">tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/uml/" rel="tag">uml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/vim/" rel="tag">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/virtualization/" rel="tag">virtualization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/vpn/" rel="tag">vpn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/website/" rel="tag">website</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/wubi/" rel="tag">wubi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/leptons-bosons/tags/x86-64/" rel="tag">x86_64</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/leptons-bosons/tags/Driver/" style="font-size: 10px;">Driver</a> <a href="/leptons-bosons/tags/EDK2/" style="font-size: 10px;">EDK2</a> <a href="/leptons-bosons/tags/Infrastructure-Architecture/" style="font-size: 10px;">Infrastructure Architecture</a> <a href="/leptons-bosons/tags/KVM/" style="font-size: 10px;">KVM</a> <a href="/leptons-bosons/tags/Open-vSwitch/" style="font-size: 17.5px;">Open vSwitch</a> <a href="/leptons-bosons/tags/OpenStack/" style="font-size: 10px;">OpenStack</a> <a href="/leptons-bosons/tags/Path-MTU/" style="font-size: 10px;">Path MTU</a> <a href="/leptons-bosons/tags/Qemu/" style="font-size: 10px;">Qemu</a> <a href="/leptons-bosons/tags/Raspberry-Pi/" style="font-size: 10px;">Raspberry Pi</a> <a href="/leptons-bosons/tags/aarch64/" style="font-size: 10px;">aarch64</a> <a href="/leptons-bosons/tags/acceleration/" style="font-size: 10px;">acceleration</a> <a href="/leptons-bosons/tags/algorithm/" style="font-size: 20px;">algorithm</a> <a href="/leptons-bosons/tags/analyst/" style="font-size: 10px;">analyst</a> <a href="/leptons-bosons/tags/association/" style="font-size: 10px;">association</a> <a href="/leptons-bosons/tags/aws-nitro/" style="font-size: 10px;">aws nitro</a> <a href="/leptons-bosons/tags/binary-index-tree/" style="font-size: 10px;">binary index tree</a> <a href="/leptons-bosons/tags/binary-search/" style="font-size: 10px;">binary search</a> <a href="/leptons-bosons/tags/block-io/" style="font-size: 10px;">block io</a> <a href="/leptons-bosons/tags/bookmark/" style="font-size: 10px;">bookmark</a> <a href="/leptons-bosons/tags/breadth-first-search/" style="font-size: 10px;">breadth-first search</a> <a href="/leptons-bosons/tags/bridge/" style="font-size: 10px;">bridge</a> <a href="/leptons-bosons/tags/calling-conventions/" style="font-size: 10px;">calling conventions</a> <a href="/leptons-bosons/tags/conntrack/" style="font-size: 10px;">conntrack</a> <a href="/leptons-bosons/tags/demo/" style="font-size: 10px;">demo</a> <a href="/leptons-bosons/tags/design-patterns/" style="font-size: 10px;">design patterns</a> <a href="/leptons-bosons/tags/dijkstra/" style="font-size: 10px;">dijkstra</a> <a href="/leptons-bosons/tags/dynamic-programing/" style="font-size: 10px;">dynamic programing</a> <a href="/leptons-bosons/tags/ethernet/" style="font-size: 10px;">ethernet</a> <a href="/leptons-bosons/tags/expert/" style="font-size: 10px;">expert</a> <a href="/leptons-bosons/tags/fenwick-tree/" style="font-size: 10px;">fenwick tree</a> <a href="/leptons-bosons/tags/fibre-channel/" style="font-size: 10px;">fibre channel</a> <a href="/leptons-bosons/tags/flow-offload/" style="font-size: 10px;">flow offload</a> <a href="/leptons-bosons/tags/flow-table/" style="font-size: 10px;">flow table</a> <a href="/leptons-bosons/tags/graph/" style="font-size: 10px;">graph</a> <a href="/leptons-bosons/tags/greedy/" style="font-size: 10px;">greedy</a> <a href="/leptons-bosons/tags/hardware/" style="font-size: 12.5px;">hardware</a> <a href="/leptons-bosons/tags/industry/" style="font-size: 12.5px;">industry</a> <a href="/leptons-bosons/tags/infiniband/" style="font-size: 10px;">infiniband</a> <a href="/leptons-bosons/tags/interface/" style="font-size: 10px;">interface</a> <a href="/leptons-bosons/tags/k-nearest-neighbors/" style="font-size: 10px;">k-nearest-neighbors</a> <a href="/leptons-bosons/tags/kernel/" style="font-size: 12.5px;">kernel</a> <a href="/leptons-bosons/tags/kvm/" style="font-size: 10px;">kvm</a> <a href="/leptons-bosons/tags/memory-layout/" style="font-size: 10px;">memory layout</a> <a href="/leptons-bosons/tags/more-algorithms/" style="font-size: 10px;">more algorithms</a> <a href="/leptons-bosons/tags/netfilter/" style="font-size: 10px;">netfilter</a> <a href="/leptons-bosons/tags/netlink/" style="font-size: 10px;">netlink</a> <a href="/leptons-bosons/tags/network/" style="font-size: 15px;">network</a> <a href="/leptons-bosons/tags/nic/" style="font-size: 10px;">nic</a> <a href="/leptons-bosons/tags/ofprot-trace/" style="font-size: 10px;">ofprot/trace</a> <a href="/leptons-bosons/tags/ovs-sandbox/" style="font-size: 10px;">ovs-sandbox</a> <a href="/leptons-bosons/tags/paper/" style="font-size: 10px;">paper</a> <a href="/leptons-bosons/tags/pcie/" style="font-size: 10px;">pcie</a> <a href="/leptons-bosons/tags/program/" style="font-size: 10px;">program</a> <a href="/leptons-bosons/tags/protocol/" style="font-size: 10px;">protocol</a> <a href="/leptons-bosons/tags/protocols/" style="font-size: 12.5px;">protocols</a> <a href="/leptons-bosons/tags/qemu/" style="font-size: 10px;">qemu</a> <a href="/leptons-bosons/tags/quick-sort/" style="font-size: 10px;">quick sort</a> <a href="/leptons-bosons/tags/segment-tree/" style="font-size: 10px;">segment tree</a> <a href="/leptons-bosons/tags/selection-sort/" style="font-size: 10px;">selection sort</a> <a href="/leptons-bosons/tags/shortest-path/" style="font-size: 10px;">shortest path</a> <a href="/leptons-bosons/tags/simple-search/" style="font-size: 10px;">simple search</a> <a href="/leptons-bosons/tags/storage/" style="font-size: 12.5px;">storage</a> <a href="/leptons-bosons/tags/tcp-syn/" style="font-size: 10px;">tcp syn</a> <a href="/leptons-bosons/tags/tcp-ip/" style="font-size: 10px;">tcp/ip</a> <a href="/leptons-bosons/tags/tool/" style="font-size: 20px;">tool</a> <a href="/leptons-bosons/tags/uml/" style="font-size: 10px;">uml</a> <a href="/leptons-bosons/tags/vim/" style="font-size: 10px;">vim</a> <a href="/leptons-bosons/tags/virtualization/" style="font-size: 15px;">virtualization</a> <a href="/leptons-bosons/tags/vpn/" style="font-size: 10px;">vpn</a> <a href="/leptons-bosons/tags/website/" style="font-size: 10px;">website</a> <a href="/leptons-bosons/tags/wubi/" style="font-size: 10px;">wubi</a> <a href="/leptons-bosons/tags/x86-64/" style="font-size: 10px;">x86_64</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/leptons-bosons/archives/2018/02/">February 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/leptons-bosons/2021/07/29/Building-EDK2-Qemu-From-Scratch-On-Raspberry-Pi/">Building EDK2 Qemu From Scratch On Raspberry Pi</a>
          </li>
        
          <li>
            <a href="/leptons-bosons/2021/03/28/infrastructure-architecture/">Next Generation of Infrastructure Architecture</a>
          </li>
        
          <li>
            <a href="/leptons-bosons/2021/01/13/papers/">The Papers</a>
          </li>
        
          <li>
            <a href="/leptons-bosons/2020/11/22/kvm-weather-report/">The KVM Weather Report</a>
          </li>
        
          <li>
            <a href="/leptons-bosons/2020/10/28/expert-association-map/">Expert &amp; Association Map</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Henry<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/leptons-bosons/" class="mobile-nav-link">Home</a>
  
    <a href="/leptons-bosons/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/leptons-bosons/js/jquery-3.4.1.min.js"></script>



  
<script src="/leptons-bosons/fancybox/jquery.fancybox.min.js"></script>




<script src="/leptons-bosons/js/script.js"></script>





  </div>
</body>
</html>